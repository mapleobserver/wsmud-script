//~silent
($localVer) = 2021121301
($changeLog) = â­ï¸ å°†ä¸€äº›ç¹ççš„æ¯å‘¨æ“ä½œä¸€é”®è‡ªåŠ¨åŒ–ã€‚
($flowName) = ä¸€é”®å’¸é±¼
($flowCode) = yjxy
($flowPath) = æ ¹æ–‡ä»¶å¤¹
($flowFinder) = æ ¹æ–‡ä»¶å¤¹
//($repourl) = https://cdn.jsdelivr.net/gh/mapleobserver/wsmud-script
($repourl) = http://wsmud-cdn.if404.com
@js ($version) = $.ajax({type: "GET", url: "(repourl)/version.txt", async: false, cache: false}).responseText;
[if] (version) != null
  @js ($remoteVer) = var v = (version);v.(flowCode)
[if] (localVer) < (remoteVer) && (remoteVer) != null
  [if] (UPnum) == null
    ($UPnum) = 0
  [if] (UPnum) < 2
    [if] (UPnum) == 1
      @print æœªè·å–åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤‡ç”¨åœ°å€å†æ¬¡å°è¯•...
      ($repourl) = http://wsmud-cdn.if404.com
    ($UPnum) = (UPnum) + 1
    [if] (flowPath) != æ ¹æ–‡ä»¶å¤¹ && (flowPath) != null
      ($flowSource) = (repourl)/(flowPath)/(flowName).flow.txt
    [else]
      ($flowSource) = (repourl)/(flowName).flow.txt
    [if] (flowFinder) == null
      ($flowFinder) = æ ¹æ–‡ä»¶å¤¹
    @js WG.SendCmd("tm å½“å‰(flowName)ç‰ˆæœ¬ã€(localVer)ã€‘ï¼Œå°†å¼€å§‹è‡ªåŠ¨æ›´æ–°è‡³æœ€æ–°ã€(remoteVer)ã€‘ã€‚")
    ($f_ss)={"name":"(flowName)","source":"(flowSource)","finder":"(flowFinder)"}
    @js var time = Date.parse( new Date());var f=(f_ss);var n=f["name"];var s=f["source"];var fd=f["finder"];WorkflowConfig.removeWorkflow({"name":n,"type":"flow","finder":fd});$.get(s,{stamp:time},function(data,status){WorkflowConfig.createWorkflow(n,data,fd);});
    @await 2000
  [else]
    ($UPnum) = null
  [if] (UPnum) != null
    @js ManagedPerformerCenter.start("(flowName)", FlowStore.get("(flowName)"));
    [exit]
[else]
  ($UPnum) = null

[if] (:room å‰¯æœ¬åŒºåŸŸ,å¿§æ„è°·)==true || (:state)==æ¨æ¼” || (:state)==é¢†æ‚Ÿ
  @print <ord>å½“å‰çŠ¶æ€æ— æ³•è¿›è¡Œä¸€é”®å’¸é±¼ï¼Œè‡ªåŠ¨åœæ­¢ï¼</ord>
  [exit]
[if] (arg0)==è¥„é˜³æé’± || (arg0)==è¥„é˜³å†›åŠŸ || (arg0)==xyjg || (arg0)==xyjq
  stopstate;jh fam 8 start
  @await 500
  [if] (:room)==è¥„é˜³åŸ-å¹¿åœº
    juanxian {réƒ­é–}?;juanxian2 {réƒ­é–}?
  $zdwk
[else if] (arg0)==è¥„é˜³æŠ¥å || (arg0)==xybm
  stopstate;jh fam 8 start
  @await 500
  [if] (:room)==è¥„é˜³åŸ-å¹¿åœº
    baoming {réƒ­é–}?
    @tip ä½ å¯ä»¥å»($xyBM)é™„è¿‘æŸ¥çœ‹æ•Œæƒ…|è¿™ä½($xyBM)å·²ç»æŠ¥åäº†ã€‚|æ‰å¯ä»¥å†æ¬¡($xyOver)è¥„é˜³å®ˆåŸ|æœ€è¿‘æ²¡($xyNone)æˆ˜äº‹
    [if] (xyBM) != null
      @print è¥„é˜³å·²æŠ¥åï¼Œè¯·é€‰æ‹©å®ˆé—¨ä½ç½®ï¼š
      @js Message.append(`<div class="item-commands"><span cmd="$wait 350;jh fam 8 start;go north;go north;go north;go north;go north;">â¬†ï¸ å®ˆåŒ—é—¨</span><span cmd="$wait 350;jh fam 8 start;go south;go south;go south;go south;go south;">â¬‡ï¸ å®ˆå—é—¨</span><span cmd="$wait 350;jh fam 8 start;go east;go east;go east;go east;go east;">â¡ï¸ å®ˆä¸œé—¨</span><span cmd="$wait 350;jh fam 8 start;go west;go west;go west;go west;go west;">â¬…ï¸ å®ˆè¥¿é—¨</span></div>`)
    [else if] (xyNone) != null
      @print è¥„é˜³å°šæœªå¼€å¯ã€‚
      $zdwk
    [else if] (xyOver) != null
      @print è¥„é˜³å·²ç»å®Œæˆã€‚
      $zdwk
  [else]
    $zdwk
[else if] (arg0)==å¿«é€Ÿè¿é•– || (arg0)==å¿«é€ŸæŠ¼é•– || (arg0)==ksyb
  stopstate
  $to æ‰¬å·åŸ-é•–å±€æ­£å…
  ksyb {ræ—éœ‡å—}
  @tip æœ€è¿‘æš‚æ—¶($done)å§”æ‰˜ï¼Œä½ å…ˆä¼‘æ¯ä¸‹å§|ä½ éœ€è¦æ”¯ä»˜($charges)é»„é‡‘çš„é›‡ä½£è´¹ç”¨|åªæœ‰æ€»é•–å¤´æ‰($can)é›‡ä½£é•–å¸ˆ|å¦‚æœä½ ä¸èƒ½æŠŠé•–é“¶($escort)é€åˆ°|ä½ ä¸æ˜¯($escort)è¿é•–å—
  [if] (charges)!=null
    <-recordGains
    task yunbiao {ræ—éœ‡å—} qkstart
    @await 11000
    @tidyBag
    recordGains->nopopup
  [else if] (can)!=null
    tm è¿é•–ç¯æ•°ä¸åˆ°200ç¯ï¼Œæ— æ³•å¿«é€Ÿè¿é•–ã€‚
  [else if] (escort)!=null
    tm å½“å‰æœ‰æœªå®Œæˆçš„è¿é•–ä»»åŠ¡ï¼Œæ— æ³•å¿«é€Ÿè¿é•–ã€‚
  $zdwk
[else if] (arg0)==æ‰«è¡å¦–å¡” || (arg0)==å¿«é€Ÿå¦–å¡” || (arg0)==sdyt || (arg0)==ksyt
  stopstate
  [if] (:room) != å¤å¤§é™†-å¢“å›­
    $goyt
    @until (:room) != å¤å¤§é™†-å¢“å›­
    @await 1000
  ss muyuan
  @tip ä½ å³å°†æ¶ˆè€—ä¸€ä¸ªæ‰«è¡ç¬¦ï¼Œ($jl_yt)ç²¾åŠ›å¿«é€Ÿå®Œæˆä¸€æ¬¡å¼‘å¦–å¡”|ä½ å°šæœª($ytJS)å¼‘å¦–å¡”
  [if] (ytJS) == null
    saodang muyuan
    @tip ä½ æ¶ˆè€—ä¸€ä¸ªæ‰«è¡ç¬¦|ä½ çš„æ‰«è¡ç¬¦ä¸å¤Ÿç»§ç»­æ‰«è¡äº†ã€‚
  [else]
    @print å¦–å¡”æœªè§£é”ï¼Œæ— æ³•æ‰«è¡ã€‚
  $zdwk
[else if] (arg0)==é—¨è´¡æ¢å…ƒæ™¶ || (arg0)==mghyj
  stopstate
  ($hqName) = é—¨æ´¾åå‹¤ç®¡ç†å‘˜
  [if] (:family) == æ­¦å½“æ´¾
    ($hqMap) = æ­¦å½“æ´¾-çŸ³é˜¶
  [else if] (:family) == å°‘æ—æ´¾
    ($hqMap) = å°‘æ—æ´¾-å±±é—¨æ®¿
  [else if] (:family) == åå±±æ´¾
    ($hqMap) = åå±±æ´¾-ç»ƒæ­¦åœº
  [else if] (:family) == å³¨çœ‰æ´¾
    ($hqMap) = å³¨çœ‰æ´¾-èµ°å»Š
  [else if] (:family) == é€é¥æ´¾
    ($hqMap) = é€é¥æ´¾-æ—é—´å°é“
  [else if] (:family) == ä¸å¸®
    ($hqMap) = ä¸å¸®-æš—é“
  [else if] (:family) == æ€æ‰‹æ¥¼
    ($hqMap) = æ€æ‰‹æ¥¼-ä¼‘æ¯å®¤
  [else]
    ($hqMap) = æ‰¬å·åŸ-æ‰¬å·æ­¦é¦†
    ($hqName) = æ­¦é¦†åå‹¤
  [while] (:room) != (hqMap)
    $to (hqMap)
    [if] (:family) == ä¸å¸®
      @await 300
      go east
    @await 500
  [if] {r(hqName)}? == null
    @print åå‹¤å¤±è¸ªï¼Œè¯·ç¨åå†è¯•ã€‚
  [else]
    ask1 {r(hqName)}?
    @dialog
    buy 1 {då…ƒæ™¶o}? from {r(hqName)}?
    @tip ä½ ä»é—¨æ´¾åå‹¤ç®¡ç†å‘˜è´­ä¹°äº†||è¿™é‡Œæ²¡æœ‰($mgYJ)å¤šçš„||ä½ æ²¡æœ‰é‚£ä¹ˆå¤šçš„($mgGJ)åŠŸç»©
    [if] (mgGJ) != null
      @print é—¨è´¡ä¸è¶³ï¼Œæ— æ³•è´­ä¹°ã€‚
    [else if] (mgYJ) != null
      @print å…ƒæ™¶å·²å”®ç©ºï¼Œæ— æ³•è´­ä¹°ã€‚
    [else]
      @print å·²è´­ä¹°
    $zdwk
[else if] (arg0)==æ“‚å°æŠ¥å || (arg0)==ltbm
  stopstate;$to æ‰¬å·åŸ-æ“‚å°
  @await 500
  select {ræ“‚å°æ¯”æ­¦æŠ¥å}?
  askbiwu {ræ“‚å°æ¯”æ­¦æŠ¥å}?
  @tip ä½ ä½¿ç”¨å½“å‰è£…å¤‡å’ŒæŠ€èƒ½($ltBM)å‚åŠ æ¯”æ­¦|ä½ å·²ç»æŠ¥åå‚åŠ æ¯”æ­¦ï¼Œ($ltGX)æ›´æ–°ä½ çš„æŠ€èƒ½å’Œè£…å¤‡|ä½ å·²æŠ¥åæˆ–æ›´æ–°çŠ¶æ€ï¼Œè¯·å‹¿è¿ç»­æŠ¥åã€‚
  [if] (ltGX) != null
    biwu record ok
  $zdwk
[else if] (arg0)==è—å®å›¾ || (arg0)==cbt
  @js DungeonsShortcuts.cangbaotu()
[else]
  @print <hiy>ğŸŸ ä¸€é”®å’¸é±¼ï¼Œç›®å‰æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š</hiy>
  @js $('.WG_log pre').append($(`<div class="item-commands"></div>`).append($(`<span class="quick_cmd qc_xyjq">ğŸ¤Œ è¥„é˜³æé’±</span>`),$(`<span class="quick_cmd qc_ksyb">ğŸ¦† å¿«é€Ÿè¿é•–</span>`),$(`<span class="quick_cmd qc_sdyt">ğŸ‰ æ‰«è¡å¦–å¡”</span>`),$(`<span class="quick_cmd qc_mghyj">ğŸŸ é—¨è´¡æ¢å…ƒæ™¶</span>`),$(`<span class="quick_cmd qc_cbt">ğŸ’ è—å®å›¾</span>`)))

  @js $('.WG_log pre').append($(`<div class="item-commands"></div>`).append($(`<span class="quick_cmd qc_xybm">ğŸ˜ è¥„é˜³æŠ¥å</span>`),$(`<span class="quick_cmd qc_ltbm">ğŸ† æ“‚å°æŠ¥å</span>`)))

  @js $(".quick_cmd").off("click")
  
  //è¥„é˜³æé’±
  @js $(".qc_xyjq").on("click", function(){ToRaid.perform(`//~silent\n@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>è¥„é˜³æé’±</hic>\n@call ä¸€é”®å’¸é±¼ è¥„é˜³æé’±`);})
  //å¿«é€Ÿè¿é•–
  @js $(".qc_ksyb").on("click", function(){ToRaid.perform(`//~silent\n@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>å¿«é€Ÿè¿é•–</hic>\n@call ä¸€é”®å’¸é±¼ å¿«é€Ÿè¿é•–`);})
  //æ‰«è¡å¦–å¡”
  @js $(".qc_sdyt").on("click", function(){ToRaid.perform(`//~silent\n@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>æ‰«è¡å¦–å¡”</hic>\n@call ä¸€é”®å’¸é±¼ æ‰«è¡å¦–å¡”`);})
  //é—¨è´¡æ¢å…ƒæ™¶
  @js $(".qc_mghyj").on("click", function(){ToRaid.perform(`//~silent\n@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>é—¨è´¡æ¢å…ƒæ™¶</hic>\n@call ä¸€é”®å’¸é±¼ é—¨è´¡æ¢å…ƒæ™¶`);})
  //è—å®å›¾
  @js $(".qc_cbt").on("click", function(){ToRaid.perform(`//~silent\n@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>è—å®å›¾</hic>\n@call ä¸€é”®å’¸é±¼ è—å®å›¾`);})

  //è¥„é˜³æŠ¥å
  @js $(".qc_xybm").on("click", function(){ToRaid.perform(`//~silent\n@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>è¥„é˜³æŠ¥å</hic>\n@call ä¸€é”®å’¸é±¼ è¥„é˜³æŠ¥å`);})
  //æ“‚å°æŠ¥å
  @js $(".qc_ltbm").on("click", function(){ToRaid.perform(`//~silent\n@print ğŸŸ ä¸€é”®å’¸é±¼ => <hic>æ“‚å°æŠ¥å</hic>\n@call ä¸€é”®å’¸é±¼ æ“‚å°æŠ¥å`);})
  
  @js $('.WG_log')[0].scrollTop = 99999;