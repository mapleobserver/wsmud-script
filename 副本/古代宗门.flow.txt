// ç™½ä¸‰ä¸‰
// ç‰ˆæœ¬æ£€æµ‹
// 2021-10-01 17:20
($localVer) = 2021100101
($changeLog) = ğŸ“ å¯ä»¥ä»å¤å¤§é™†æˆ–ç§»èŠ±å®«è¿›å…¥ã€‚ç›®å‰åªåšäº†æŒé—¨æ‰³æŒ‡å’Œç»ƒåŠŸæœè·¯çº¿ï¼Œå…¶ä½™è·¯çº¿å¾…åšã€‚\nâ€¼ï¸ å»ºè®®å…ˆå¤šè„±å‡ ä¸ªæŠ€èƒ½é¿å…æ¯”è¯•æ‰“èµ¢å¤§å¸ˆå…„ã€‚\nğŸŒº æ²¡æœ‰å®—é—¨æŒ‡ç¯ä¼šè‡ªåŠ¨æ”¹ä»ç§»èŠ±å®«è¿›å…¥ã€‚\nğŸ”§ è‡ªåŠ¨æ£€æµ‹ç§»èŠ±å®«è£…å¤‡ï¼Œç§˜ç±é»˜è®¤çœŸè¨€æ‰‹å°ï¼Œå¯ä»¥è‡ªå·±æ”¹ã€‚\nğŸ™ å¦‚æœæœ‰æ–°æ”»ç•¥æˆ–è€…é‡åˆ°bugï¼Œè¯·åˆ°ä»™ç•Œç¾¤åé¦ˆã€‚
($flowName) = å¤ä»£å®—é—¨
($flowCode) = gdzm
($flowPath) = å‰¯æœ¬
($flowFinder) = æ ¹æ–‡ä»¶å¤¹
//($repourl) = https://cdn.jsdelivr.net/gh/mapleobserver/wsmud-script
($repourl) = http://wsmud-cdn.if404.com
@js ($version) = $.ajax({type: "GET", url: "(repourl)/version.txt", async: false, cache: false}).responseText;
[if] (version) != null
  @js ($remoteVer) = var v = (version);v.(flowCode)
[if] (localVer) < (remoteVer) && (remoteVer) != null
  [if] (UPnum) == null
    ($UPnum) = 0
  [if] (UPnum) < 2
    [if] (UPnum) == 1
      @print æœªè·å–åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤‡ç”¨åœ°å€å†æ¬¡å°è¯•...
      ($repourl) = http://wsmud-cdn.if404.com
    ($UPnum) = (UPnum) + 1
    [if] (flowPath) != æ ¹æ–‡ä»¶å¤¹ && (flowPath) != null
      ($flowSource) = (repourl)/(flowPath)/(flowName).flow.txt
    [else]
      ($flowSource) = (repourl)/(flowName).flow.txt
    [if] (flowFinder) == null
      ($flowFinder) = æ ¹æ–‡ä»¶å¤¹
    @js WG.SendCmd("tm å½“å‰(flowName)ç‰ˆæœ¬ã€(localVer)ã€‘ï¼Œå°†å¼€å§‹è‡ªåŠ¨æ›´æ–°è‡³æœ€æ–°ã€(remoteVer)ã€‘ã€‚")
    ($f_ss)={"name":"(flowName)","source":"(flowSource)","finder":"(flowFinder)"}
    @js var time = Date.parse( new Date());var f=(f_ss);var n=f["name"];var s=f["source"];var fd=f["finder"];WorkflowConfig.removeWorkflow({"name":n,"type":"flow","finder":fd});$.get(s,{stamp:time},function(data,status){WorkflowConfig.createWorkflow(n,data,fd);});
    @wait 1500
    ($log) = âœ…(flowName)å·²æ›´æ–°è‡³æœ€æ–°ç‰ˆã€(remoteVer)ã€‘ï¼Œå³å°†è‡ªåŠ¨è¿è¡Œã€‚
  [else]
    ($log) = â­•(flowName)æš‚æ—¶æ— æ³•æ­£å¸¸æ›´æ–°è‡³ã€(remoteVer)ã€‘ï¼Œç›´æ¥è¿è¡Œå½“å‰ç‰ˆæœ¬ã€(localVer)ã€‘ã€‚
    ($UPnum) = null
  @js WG.SendCmd("tm (log)")
  @print <ord>(log)</ord>
  [if] (UPnum) != null
    @js var f=(f_ss);ManagedPerformerCenter.start(f["name"], FlowStore.get(f["name"]));
    [exit]
[else]
  ($UPnum) = null
  [if] (remoteVer) == null
    ($log) = âš ï¸è·å–è¿œç¨‹ç‰ˆæœ¬å¤±è´¥ï¼Œç»´æŒå½“å‰ç‰ˆæœ¬ä¸å˜ã€‚
  [else]
    ($log) = ğŸš€å¼€å§‹è¿è¡Œ(flowName)ï¼Œå½“å‰ç‰ˆæœ¬ã€(remoteVer)ã€‘ã€‚æ›´æ–°å†…å®¹ï¼š(changeLog)
  //@js WG.SendCmd("tm (log)")
  //@print <ord>(log)</ord>
// é¢„å¤„ç†
@cmdDelay 500
@js alert('(changeLog)')
@js messageClear();messageAppend('(changeLog)',1,0)

// æ£€æŸ¥ç§»èŠ±å®«è£…å¤‡
[if] {bâ˜…â˜…â˜…â˜…â˜…â˜…é‚€æœˆçš„æ‰‹é•¯}? != null
  ($yihua) = é‚€æœˆçš„æ‰‹é•¯
[else if] {bâ˜…â˜…â˜…â˜…â˜…â˜…æ¶Ÿæ˜Ÿçš„å†°ç‰ç°ª}? != null
  ($yihua) = æ¶Ÿæ˜Ÿçš„å†°ç‰ç°ª
[else]
  @print <ord>æ²¡æœ‰ç§»èŠ±å®«å…­æ˜Ÿæ‰‹é•¯æˆ–å†°ç‰ç°ªï¼Œæµç¨‹ç»ˆæ­¢ã€‚</ord>
  [exit]
// é¢„è®¾è¿›å…¥æ–¹å¼
[if] (GZMway) == null
  [if] (:grade) == æ­¦ç¥ || (:grade) == å‰‘ç¥ || (:grade) == åˆ€çš‡ || (:grade) == å…µä¸» || (:grade) == æˆ˜ç¥
    ($GZMway) = å¤å¤§é™†
  [else]
    ($GZMway) = ç§»èŠ±å®«
[if] {bå®—é—¨æŒ‡ç¯}? == null
  ($GZMway) = ç§»èŠ±å®«

// æ£€æŸ¥ç§˜ç±
[if] {bçœŸè¨€æ‰‹å°ç§˜ç±}? != null
  ($book) = çœŸè¨€æ‰‹å°ç§˜ç±
[else]
  ($book) = æ‰‹åŠ¨å¡«å†™

// èœå•
[(MHTriggers)==null]($MHTriggers)=è¡€åˆ€ä¹é˜´,å€šå¤©ä¹é˜´,è¡€å‰‘èµ·æ‰‹,æ··æ²Œå‰‘å¿ƒ,æ··æ²Œä¹é˜´
#select ($GZMway) = è¿›å…¥å¤ä»£å®—é—¨æ–¹å¼,å¤å¤§é™†|ç§»èŠ±å®«,(GZMway)
#select ($type) = é€‰æ‹©è·¯çº¿,æŒé—¨æ‰³æŒ‡|ç»ƒåŠŸæœ,(type)
#input ($book) = ç»™å¤§é•¿è€çš„ç§˜ç±åå­—,(book)
#select ($yihua) = æŒé—¨æ‰³æŒ‡å’Œç»ƒåŠŸæœè·¯çº¿è¦ç»™å°å¸ˆå¦¹çš„ç‰©å“,é‚€æœˆçš„æ‰‹é•¯|æ¶Ÿæ˜Ÿçš„å†°ç‰ç°ª,(yihua)
#input ($MHTriggers) = å…³é—­è§¦å‘(å¤šä¸ªè§¦å‘åå­—ç”¨è‹±æ–‡é€—å·éš”å¼€),(MHTriggers)
#config

// æ£€æŸ¥å®—é—¨æŒ‡ç¯
[if] {bå®—é—¨æŒ‡ç¯}? == null && (GZMway) == å¤å¤§é™†
  ($GZMway) = ç§»èŠ±å®«
  @print <ord>æ²¡æœ‰<hig>å®—é—¨æŒ‡ç¯</hig>ï¼Œè¿›å…¥æ–¹å¼æ”¹ä¸ºç§»èŠ±å®«ã€‚</ord>
// æ£€æŸ¥è¿›å…¥æ–¹å¼
[if] (GZMway) == null
  ($ready1) =false
  @print <ord>æ²¡æœ‰é€‰æ‹©è¿›å…¥å¤ä»£å®—é—¨çš„æ–¹å¼ï¼Œæµç¨‹ç»ˆæ­¢ã€‚</ord>
// æ£€æŸ¥ç‰©å“
[if] (type) == æŒé—¨æ‰³æŒ‡ || (type) == ç»ƒåŠŸæœ
  // æ£€æŸ¥ç§˜ç±
  @js ($miji) = '(book)'.indexOf('ç§˜ç±')
  [if] (miji) == -1
    ($book) = (book)ç§˜ç±
  [if] {b(book)o}? == null
    ($ready2) = false
    @print <ord>æ²¡æœ‰<hio>(book)</hio>ï¼ˆ<hiy>é‡æ–°å‡†å¤‡æ—¶è¯·è‡ªå·±ç¡®ä¿å·²å­¦ä¹ è¯¥ç§˜ç±å¹¶ä¸”æœ‰å¤‡ä»½ï¼Œæˆ–è€…ç”¨æ‰‹æŠ„æœ¬</hiy>ï¼‰ï¼Œæµç¨‹ç»ˆæ­¢ã€‚</ord>
  // æ£€æŸ¥ç§»èŠ±å®«è£…å¤‡
  [if] (yihua) != null
    [if] {bâ˜…â˜…â˜…â˜…â˜…â˜…(yihua)y}? == null
      ($ready3) = false
      @print <ord>æ²¡æœ‰<hiy>â˜…â˜…â˜…â˜…â˜…â˜…(yihua)</hiy>ï¼Œæµç¨‹ç»ˆæ­¢ã€‚</ord>

[if] (ready1) == false || (ready2) == false || (ready3) == false
  $zdwk
  [exit]

stopstate
team out
@renew

// å¤å¤§é™†
[if] (GZMway) == å¤å¤§é™†
  jh fam 9 start
  go enter
  go up
  @tip æ‰“è´¥æˆ‘ï¼Œä½ å°±($pass)ä¸Šå»|èšé­‚æˆåŠŸ|è¸è¿‡é•¿ç”Ÿé—¨|ä½ å·²å ªç ´ç”Ÿæ­»|å¤è€çš„å¤§é™†å¯»æ‰¾çœŸç›¸|ä½ è¿($pass)éƒ½æ²¡èšåˆ|ä½ æƒ³($pass)ä¸ºç¥å—
  [if] (pass) != null
    @print <ord>ä¸ç¬¦åˆå‰å¾€å¤å¤§é™†è¦æ±‚ï¼Œæµç¨‹ç»ˆæ­¢ã€‚</ord>
    $zdwk
    [exit]
  ggdl {rç–¯ç™«çš„è€å¤´}
  go north[3]
  go north[3]
  look shi
  tiao1 shi;tiao3 shi
  tiao1 shi;tiao3 shi
  tiao2 shi
  go north

// ç§»èŠ±å®«
[else if] (GZMway) == ç§»èŠ±å®«
  @cmdDelay 1500
  jh fb 22 start2;cr huashan/yihua/shandao 1 0
  [while] (xuanwo) != true
    <---
    [if] {rç¥ç§˜çš„å°¸ä½“}? != null
      [if] {bå®—é—¨æŒ‡ç¯}? == null
        get all from {rç¥ç§˜çš„å°¸ä½“}?
      ($xuanwo) = true
      @cmdDelay 500
      [break]
    --->
    go south[5]
    go south[5]
    go south[5]
    $killall
    go south
    go south
    $killall
    go south
    $killall
    go southeast
    $killall
    @until (:combating) == false
    go northwest;go southwest
    $killall
    @until (:combating) == false
    look hua
    @tip ä½ æ•°äº†ä¸‹å¤§æ¦‚æœ‰($number)æœµèŠ±
    go southeast
    look bed;pushstart bed;pushleft bed[(number)]
    @await 2000
    pushright bed[8]
    @await 2000
    go down
    fire;go west
    $killall
    @until (:combating) == false
    go west
    go west
    go north
    go north
    go north
    go north
    @print <ord>æœªæ‰¾åˆ°å°¸ä½“ï¼Œè¯·é‡è¯•ã€‚</ord>
    cr;cr over
    $zdwk
    [exit]

look xuanwo
[if] (GZMway) == å¤å¤§é™†
  tiao xuanwo
[else if] (GZMway) == ç§»èŠ±å®«
  tiao xuanwo ok
go north

//è¿›å…¥å‰¯æœ¬
cr gumen/shanmen
go west
// æŠ¤å±±å¤§é˜µ
packitem tzdl {bå®—é—¨æŒ‡ç¯}?
@tip ä½ å´ä»æ˜æš—äº¤é”™çš„å…‰å½±ä¸­çœ‹åˆ°($distance)é¢ä¼¼ä¹å¯ä»¥èµ°å‡ºå»
[if] (distance) == ä¸œ
  go east
[else if] (distance) == å—
  go south
[else if] (distance) == è¥¿
  go west
[else if] (distance) == åŒ—
  go north
// è¿›å…¥å®—é—¨
go west[2]
// æŒé—¨æ‰³æŒ‡
[if] (type) == æŒé—¨æ‰³æŒ‡ || (type) == ç»ƒåŠŸæœ
  // å…³é—­è‡ªåŠ¨å‡ºæ‹›å’Œæ‰€æœ‰èµ·æ‰‹è§¦å‘
  $stoppfm
  setting auto_pfm 0
  enable force none;enable sword none
  enable unarmed none;uneq (:eq0)
  [if] (MHTriggers) != null
    @js ($tgs)=var ts=("\""+"(MHTriggers)"+"\"").replace(/ï¼Œ/g,",");ts.replace(/,/g,"\",\"").split(",")
    @js ($tl)=[(tgs)].length
    ($num)=0
    [while] (num)<(tl)
      @js ($t)=[(tgs)][(num)]
      @js ToRaid.perform(`//~silent\n@off (t)`);
      ($num)=(num)+1
    @print å·²å…³é—­æŒ‡å®šè§¦å‘ï¼š(MHTriggers)
  // è§å¤§å¸ˆå…„
  go west[2]
  @liaoshang
  fight {rå¤§å¸ˆå…„}?
  @tip å¯ä»¥å‘Šè¯‰æˆ‘ä¸€äº›å®—é—¨çš„äº‹æƒ…å—
  answer {rå¤§å¸ˆå…„}? 2
  @until (:combating) == false && (:free) == true && (:status faint) == false && (:status miss) == false && (:status tysp) == false
  go east;go north
  @tip å¤§å¸ˆå…„æ‰˜æˆ‘æ¥äº¤è¿˜ç§˜ç±
  answer {rå¤§é•¿è€}? 2
  give {rå¤§é•¿è€}? 1 {b(book)}?
  @tip è¿™æœ¬ä¹¦ä¸åƒæ˜¯ä»è¿™é‡Œå€Ÿå‡ºçš„
  @print ***************************************
  @print (:hour):(:minute):(:second) æ­¤å¤„éœ€ç­‰å¾…10åˆ†é’Ÿ
  @print ***************************************
  @wait 600000
  @print ***************************************
  @print å¯ä»¥å»æ‰¾å¤§å¸ˆå…„äº†
  @print ***************************************
  go south;go west
  @tip å¤§é•¿è€å–Šä½ è¿‡å»
  answer {rå¤§å¸ˆå…„}? 1
  go east;go north
  @tip è¿™äº›ä¸œè¥¿åº”è¯¥å¯¹ä½ æœ‰ç”¨
  answer {rå¤§é•¿è€}? 1
  go south;go west
  @tip æŠŠç§˜ç±ç»™ä»–
  answer {rå¤§å¸ˆå…„}? 1
  @tip ä¸‹æ¬¡å¸¦ä½ å»ä¸ªå¥½ç©çš„åœ°æ–¹
  @print ***************************************
  @print (:hour):(:minute):(:second) æ­¤å¤„éœ€ç­‰å¾…10åˆ†é’Ÿï¼Œç›´åˆ°å¤§å¸ˆå…„æ‰¾ä½ å¯¹è¯
  @print ***************************************
  @await 600000
  @print ***************************************
  @print å¯ä»¥å»æ‰¾å¤§å¸ˆå…„äº†
  @print ***************************************
  go north;go south
  @tip å¸¦ä½ å»ä¸ªå¥½åœ°æ–¹
  answer {rå¤§å¸ˆå…„}? 1
  @tip è¿™æ¡å°è·¯åªæœ‰æˆ‘çŸ¥é“
  answer {rå¤§å¸ˆå…„}? 1
  @tip è¿™ä¸ªç€‘å¸ƒåˆ«çœ‹ä¸å¤§
  answer {rå¤§å¸ˆå…„}? 1
  @tip é¥æƒ³ä¸‡å¹´åå´åŒ–ä¸ºä¸€ç‰‡åºŸå¢Ÿ
  [if] (type) == æŒé—¨æ‰³æŒ‡ || (type) == ç»ƒåŠŸæœ
    answer {rå¤§å¸ˆå…„}? 1
    @until (:room) == ä¸Šå¤å®—é—¨(ä¸‡å¹´å‰)-ç»ƒæ­¦åœº(å‰¯æœ¬åŒºåŸŸ)
    go south
    @tip ä½ å°±æ˜¯æœ€è¿‘å’Œå¤§å¸ˆå…„æ‰“çš„ç«çƒ­çš„é‚£ä½å¸ˆå…„å§
    answer {rå°å¸ˆå¦¹}? 2
    give {rå°å¸ˆå¦¹}? 1 {bâ˜…â˜…â˜…â˜…â˜…â˜…(yihua)}?
    @print ***************************************
    @print (:hour):(:minute):(:second) æ­¤å¤„éœ€ç­‰å¾…10åˆ†é’Ÿï¼Œç›´åˆ°å°å¸ˆå¦¹æ‰¾ä½ å¯¹è¯
    @print ***************************************
    @await 600000
    @print ***************************************
    @print å¯ä»¥å»æ‰¾å°å¸ˆå¦¹äº†
    @print ***************************************
    go north;go south
    @tip å¸¦ä½ å»ä¸ªå¥½ç©çš„åœ°æ–¹
    [if] (type) == æŒé—¨æ‰³æŒ‡
      answer {rå°å¸ˆå¦¹}? 1
      @tip ä½ ä»¬æ¥åˆ°ä¸€ä¸ªç€‘å¸ƒä¸‹é¢
      look teng
      open teng
      @tip å°±æ˜¯è¿™ä¸ªé›•åƒ
      look hu
      //@tip åº•åº§æœ‰ä¸ªæ‰‹æŒå¤§å°çš„æ’æ§½
      fl hu
      @tip æˆ‘ä»¬å»åˆ«çš„åœ°æ–¹ç©å§
      answer {rå°å¸ˆå¦¹}? 2
      @tip å¥½ä¸å®¹æ˜“æ‰¾ä¸ªä¿é•–
      @tip åŒºåŒºä¸€ä¸ªä»¤ç‰Œ
      look teng
      open teng
      look hu
      fl hu
      @tip å²©å£éœ²å‡ºä¸€ä¸ªé»‘å¹½å¹½çš„æ´å£
      go down
      @tip ä½ å°±æ˜¯å¤§é•¿è€æ‰€è¯´çš„å¤–æ¥äºº
      answer {ræŒé—¨}? 1
      @tip è¿™ä»¶å™¨ç‰©å°±æ‹œæ‰˜ä½ ä»£ä¸ºä¿ç®¡
      get all from {rå¦–ç‹çš„å°¸ä½“}?
      @print <hiy>æŒé—¨æ‰³æŒ‡è·¯çº¿å·²å®Œæˆï¼Œæµç¨‹å³å°†ç»“æŸã€‚</hiy>
    [else if] (type) == ç»ƒåŠŸæœ
      answer {rå°å¸ˆå¦¹}? 2
      @tip è¿™æ˜¯æˆ‘æ‰¾å¤§é•¿è€æ±‚äº†å¾ˆä¹…æ‰ç»™æˆ‘çš„
      @print <hiy>ç»ƒåŠŸæœè·¯çº¿å·²å®Œæˆï¼Œæµç¨‹å³å°†ç»“æŸã€‚</hiy>

// ç»“æŸå‰¯æœ¬
cr;cr over
$zdwk