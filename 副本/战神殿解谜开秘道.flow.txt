// raid.flow
// æˆ˜ç¥æ®¿è§£è°œå¼€ç§˜é“ï¼Œåœ¨æœ€å·¦è¾¹æœ‰ç¥çŸ³çš„å·¦é›ç¿¼æˆ¿é—´è¿è¡Œï¼Œè‡ªåŠ¨ç‚¹çŸ³æ¿å¼€ç§˜é“ï¼Œä¼šåœ¨é˜Ÿä¼é¢‘é“æŠ¥æœ€åä¸€ä¸ªæ–¹ä½ã€‚å³é›ç¿¼æ‰“å®Œç¬¬ä¸‰æ³¢å®ˆå«åè‡ªåŠ¨è¿›å…¥ç§˜é“ã€‚
// å››åŒºç™½ä¸‰ä¸‰
// 2020.03.24 ä¿®å¤æœ€åä¸€é¢—æ˜Ÿå®¿çš„åˆ¤æ–­bugï¼Œæ„Ÿè°¢è¶Šç‹±å…”å¤§ä½¬çš„æé†’ğŸ™
// 2020.03.26 1.æœ€åçš„æ–¹å‘å¢åŠ ç®­å¤´ç¬¦å·æ–¹ä¾¿è¯†åˆ«ï¼Œæ„Ÿè°¢ç‹¬å­¤å­¤ç‹¬å¤§ä½¬çš„å»ºè®®ğŸ™ 2.åŠ å¿«äº†ç‚¹çŸ³æ¿çš„é€Ÿåº¦ï¼Œç»™å¤§ä½¬ä»¬ï¼ˆå°¤å…¶é•¿ç”Ÿå¤§ä½¬ï¼‰èŠ‚çº¦ç‚¹æ—¶é—´ã€‚
// 2020.03.27 å³é›ç¿¼æ‰“å®Œç¬¬ä¸‰æ³¢å®ˆå«åä¼šè‡ªåŠ¨è¿›ç§˜é“ï¼Œæ„Ÿè°¢æˆ˜ç¥æ®¿é‡‘ç‰Œä»£æ‰“ä¸‰åŒºã€ç‹¬å­¤å­¤ç‹¬ã€‘å¤§ä½¬çš„å»ºè®®ğŸ™
[if] (:room) != æˆ˜ç¥æ®¿-å·¦é›ç¿¼(å‰¯æœ¬åŒºåŸŸ)
    @print è¯·å‘å·¦èµ°åˆ°å·¦é›ç¿¼
@until (:room) == æˆ˜ç¥æ®¿-å·¦é›ç¿¼(å‰¯æœ¬åŒºåŸŸ)
look shi
@tip å’Œå¤–é¢æ˜Ÿç©ºæ˜Ÿå®¿ä½ç½®ä¸€ä¸€å¯¹åº”ï¼Œ($star_0)ï¼Œ($star_1)ï¼Œ($star_2)ï¼Œ($star_3)ï¼Œ($star_4)ï¼Œ($star_5)ï¼Œ($star_6)ï¼Œ($star_7)è¿™äº›æ˜Ÿå®¿ä¾æ¬¡é—ªçƒ
($stars) = "(star_0)","(star_1)","(star_2)","(star_3)","(star_4)","(star_5)","(star_6)","(star_7)"
($dirs) = {"star":"è§’äº¢å®¤","dir":1,"eswn":"ä¸œåŒ—â†—ï¸","go":"northeast"},{"star":"æ°æˆ¿å¿ƒ","dir":0,"eswn":"ä¸œâ†’","go":"east"},{"star":"å°¾ç®•è½¸","dir":2,"eswn":"ä¸œå—â†˜ï¸","go":"southeast"},{"star":"äº•é¬¼å‚","dir":4,"eswn":"è¥¿å—â†™ï¸","go":"southwest"},{"star":"æŸ³æ˜Ÿå¼ ç¿¼","dir":3,"eswn":"å—â†“","go":"south"},{"star":"å¥å¨„æ–—ç‰›","dir":6,"eswn":"è¥¿åŒ—â†–ï¸","go":"northwest"},{"star":"èƒƒæ˜´æ¯•è§œ","dir":5,"eswn":"è¥¿â†","go":"west"},{"star":"å¥³è™šå±å£","dir":7,"eswn":"åŒ—â†‘","go":"north"}
@cmdDelay 100
($num_1) = 0
[while] (num_1) < 8
    @js ($star) = [(stars)][(num_1)]
    ($num_2) = 0
    [while] (num_2) < 28
        ($dir) = null
        @js ($dir) = var d=[(dirs)];var s=d[(num_2)]["star"].indexOf("(star)");if(s>=0){d[(num_2)]["dir"]}
        [if] (dir) != null
            [break]
        ($num_2) = (num_2) + 1
    push (dir)
    ($num_1) = (num_1) + 1
look shi
@tip æ®¿é¡¶çš„æ˜Ÿå›¾ä¾æ—§ï¼Œå´ä»…å‰©ä¸€é¢—($last)å®¿æ˜Ÿå­¤é›¶é›¶çš„é—ªçƒç€
($num_3) = 0
[while] (num_3) < 28
        ($dir_l) = null
        ($go_l) = null
        @js ($dir_l) = var d=[(dirs)];var s=d[(num_3)]["star"].indexOf("(last)");if(s>=0){d[(num_3)]["eswn"]}
        @js ($go_l) = var d=[(dirs)];var s=d[(num_3)]["star"].indexOf("(last)");if(s>=0){d[(num_3)]["go"]}
        [if] (dir_l) != null && (go_l) != null
            [break]
        ($num_3) = (num_3) + 1
@print <hir>(last)å®¿ï¼Œæœ€åä¸€ä¸ªæ–¹ä½æ˜¯ã€(dir_l)ã€‘</hir>
tm (last)å®¿ï¼Œæœ€åä¸€ä¸ªæ–¹ä½æ˜¯ã€(dir_l)ã€‘60ç§’å€’è®¡æ—¶å·²å¼€å§‹ï¼Œè¯·æŠ“ç´§å¼€æ‰“ã€‚
@print <hir>æ‰“å®Œå³é›ç¿¼æœ€åä¸€æ³¢å®ˆå«åä¼šè‡ªåŠ¨è¿›ç§˜é“ã€(go_l)ã€‘</hir>
@until (:room) == æˆ˜ç¥æ®¿-å³é›ç¿¼(å‰¯æœ¬åŒºåŸŸ)
@until (:combating) == true
@until (:combating) == false && (:living) == true
go (go_l)