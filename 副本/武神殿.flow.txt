//~silent
// ç™½ä¸‰ä¸‰
// ç‰ˆæœ¬æ£€æµ‹
// 2022-01-31 09:59
($localVer) = 2022013101
($changeLog) = ğŸšŒã€‚ç›®å‰è·¯çº¿æœ‰ï¼š10é¡µä¿®ç½—åˆ€ã€‚\nğŸ™ å¦‚æœæœ‰æ–°æ”»ç•¥æˆ–è€…é‡åˆ°bugï¼Œè¯·åˆ°ä»™ç•Œç¾¤åé¦ˆã€‚
($flowName) = æ­¦ç¥æ®¿
($flowCode) = wsd
($flowPath) = å‰¯æœ¬
($flowFinder) = æ ¹æ–‡ä»¶å¤¹
//($repourl) = https://cdn.jsdelivr.net/gh/mapleobserver/wsmud-script
($repourl) = http://wsmud-cdn.if404.com
@js ($version) = $.ajax({type: "GET", url: "(repourl)/version.txt", async: false, cache: false}).responseText;
[if] (version) != null
  @js ($remoteVer) = var v = (version);v.(flowCode)
[if] (localVer) < (remoteVer) && (remoteVer) != null
  [if] (UPnum) == null
    ($UPnum) = 0
  [if] (UPnum) < 2
    [if] (UPnum) == 1
      @print æœªè·å–åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤‡ç”¨åœ°å€å†æ¬¡å°è¯•...
      ($repourl) = http://wsmud-cdn.if404.com
    ($UPnum) = (UPnum) + 1
    [if] (flowPath) != æ ¹æ–‡ä»¶å¤¹ && (flowPath) != null
      ($flowSource) = (repourl)/(flowPath)/(flowName).flow.txt
    [else]
      ($flowSource) = (repourl)/(flowName).flow.txt
    [if] (flowFinder) == null
      ($flowFinder) = æ ¹æ–‡ä»¶å¤¹
    @js WG.SendCmd("tm å½“å‰(flowName)ç‰ˆæœ¬ã€(localVer)ã€‘ï¼Œå°†å¼€å§‹è‡ªåŠ¨æ›´æ–°è‡³æœ€æ–°ã€(remoteVer)ã€‘ã€‚")
    ($f_ss)={"name":"(flowName)","source":"(flowSource)","finder":"(flowFinder)"}
    @js var time = Date.parse( new Date());var f=(f_ss);var n=f["name"];var s=f["source"];var fd=f["finder"];WorkflowConfig.removeWorkflow({"name":n,"type":"flow","finder":fd});$.get(s,{stamp:time},function(data,status){WorkflowConfig.createWorkflow(n,data,fd);});
    @wait 1500
    ($log) = âœ…(flowName)å·²æ›´æ–°è‡³æœ€æ–°ç‰ˆã€(remoteVer)ã€‘ï¼Œå³å°†è‡ªåŠ¨è¿è¡Œã€‚
  [else]
    ($log) = â­•(flowName)æš‚æ—¶æ— æ³•æ­£å¸¸æ›´æ–°è‡³ã€(remoteVer)ã€‘ï¼Œç›´æ¥è¿è¡Œå½“å‰ç‰ˆæœ¬ã€(localVer)ã€‘ã€‚
    ($UPnum) = null
  @js WG.SendCmd("tm (log)")
  @print <ord>(log)</ord>
  [if] (UPnum) != null
    @js var f=(f_ss);ManagedPerformerCenter.start(f["name"], FlowStore.get(f["name"]));
    [exit]
[else]
  ($UPnum) = null
  [if] (remoteVer) == null
    ($log) = âš ï¸è·å–è¿œç¨‹ç‰ˆæœ¬å¤±è´¥ï¼Œç»´æŒå½“å‰ç‰ˆæœ¬ä¸å˜ã€‚
  [else]
    ($log) = ğŸš€å¼€å§‹è¿è¡Œ(flowName)ï¼Œå½“å‰ç‰ˆæœ¬ã€(remoteVer)ã€‘ã€‚æ›´æ–°å†…å®¹ï¼š(changeLog)
  //@js WG.SendCmd("tm (log)")
  //@print <ord>(log)</ord>
// é¢„å¤„ç†
@cmdDelay 500

// èœå•
#select ($type) = <ord>å½“å‰åªæœ‰10é¡µä¿®ç½—åˆ€è·¯çº¿ï¼Œä¸€æ¬¡æ€§ï¼Œä¸€è½®æ´»åŠ¨ä¸­é‡å¤è¿›è¡Œä¸ä¼šå†ç»™ã€‚å…¶å®ƒè·¯çº¿ç­‰å¾…å¤§ä½¬è¡¥å……ã€‚</ord><br/>&nbsp*&nbspğŸšŒ é€‰æ‹©è·¯çº¿,10é¡µä¿®ç½—åˆ€,(type)
#config

// æ£€æŸ¥æŒé—¨æ‰³æŒ‡
[if] (type) == 10é¡µä¿®ç½—åˆ€b
  stopstate
  [if] {bæŒé—¨æ‰³æŒ‡o}? == null
    ($eqjz) = (:eq5)
    stopstate;uneq (:eq5)
  [if] {bæŒé—¨æ‰³æŒ‡o}? == null
    eq (eqjz)
    ($ready) = false
    @print <ord>æ²¡æœ‰<hio>æŒé—¨æ‰³æŒ‡</hio>ï¼Œæµç¨‹ç»ˆæ­¢ï¼Œè¯·å…ˆé€šè¿‡ã€å¤ä»£å®—é—¨ã€‘æ´»åŠ¨å‰¯æœ¬è·å–æŒé—¨æ‰³æŒ‡ã€‚</ord>
  [else]
    stopstate;eq {bæŒé—¨æ‰³æŒ‡o}?

// æœªå‡†å¤‡å®Œå–„åˆ™ç»ˆæ­¢ã€‚
  [if] (ready) == false
    $zdwk
    [exit]


tm æœ¬æ¬¡å‰¯æœ¬è·¯çº¿ï¼š(type)
@print ğŸšŒ æœ¬æ¬¡å‰¯æœ¬è·¯çº¿ï¼š<hio>(type)</hio>
stopstate
team out

// å‰å¾€å¤å¤§é™†
jh fam 9 start
go enter
go up
@tip æ‰“è´¥æˆ‘ï¼Œä½ å°±($pass)ä¸Šå»|èšé­‚æˆåŠŸ|è¸è¿‡é•¿ç”Ÿé—¨|ä½ å·²å ªç ´ç”Ÿæ­»|å¤è€çš„å¤§é™†å¯»æ‰¾çœŸç›¸|ä½ è¿($pass)éƒ½æ²¡èšåˆ|ä½ æƒ³($pass)ä¸ºç¥å—
[if] (pass) != null
  @print <ord>ä¸ç¬¦åˆå‰å¾€å¤å¤§é™†è¦æ±‚ï¼Œæµç¨‹ç»ˆæ­¢ã€‚</ord>
  $zdwk
  [exit]
ggdl {rç–¯ç™«çš„è€å¤´}
go north[3]
go north[3]
look shi
tiao1 shi;tiao3 shi
tiao1 shi;tiao3 shi
tiao2 shi
go north
//è¿›å…¥æ¼©æ¶¡
look xuanwo
tiao xuanwo
//å¾€ä¸œå‰å¾€æ­¦ç¥æ®¿å‰¯æœ¬
go east

//è¿›å…¥å‰¯æœ¬
cr gzc/damen
go north
go north
@tip å¥‰æŒé—¨ä»¤å…¥æ®¿|ä¸ºä»€ä¹ˆä¸å¼€æ”¾
answer {rç¥æ®¿å®ˆå«}? 1
@tip ç¥æ®¿å®ˆå«è®©å¼€é€šè·¯
go north

//ä¸»çº¿
[if] (type) == 10é¡µä¿®ç½—åˆ€
  //è½¬é›•åƒ
  ($go1) = 'north','south','west','east'
  ($go2) = 'south','north','east','west'
  ($dir) = 'å—','åŒ—','ä¸œ','è¥¿'
  ($num) = 0
  [while] (num) < 4
    @js ($eswn1) = [(go1)][(num)]
    @js ($eswn2) = [(go2)][(num)]
    @js ($dir1) = [(dir)][(num)]
    go (eswn1)
    [while] true
      zhuan xiang
      @tip ä½ å°†é›•å¡‘è½¬åŠ¨ï¼Œé¢å‘äº†($dir2)æ–¹
      [if] (dir2) == (dir1)
        go (eswn2)
        [break]
    ($num) = (num) + 1
  go northwest
  go east
  go down;go south
  @print ***************************************
  @print (:hour):(:minute):(:second) æ­¤å¤„éœ€ç­‰å¾…çº¦2åˆ†é’Ÿï¼Œ<hiy>è¯·ä¸è¦æ¢æˆ¿é—´</hiy>ã€‚
  @print ***************************************
  @tip å°±ç®—é‚£åªç«é¸Ÿè‡ªå·±è·‘æ¥
  go north;go up;go west
  @print ***************************************
  @print (:hour):(:minute):(:second) æ­¤å¤„éœ€ç­‰å¾…çº¦2åˆ†é’Ÿï¼Œ<hiy>è¯·ä¸è¦æ¢æˆ¿é—´</hiy>ã€‚
  @print ***************************************
  @tip å¦–ç¥æ‰“æ¥äº†å¿«è·‘å§
  go southeast
  @tip ç›—å–å¦–ç¥æ°”è¿ç¥é­‚
  @tip å¸®æœ±é›€
  [if] (type) == 10é¡µä¿®ç½—åˆ€
    go northwest
    go east
    go down;go south
    look men;dk men
    go south
    look fu;an fu
    @tip å¯å¦å¸®æˆ‘å‰å»æŸ¥æ¢
    answer {rå®ˆå¢“è€äºº}? 1
    @print <hiy><hio>(type)è·¯çº¿</hio>å·²å®Œæˆï¼Œæµç¨‹å³å°†ç»“æŸã€‚</hiy>
// ç»“æŸå‰¯æœ¬
cr;cr over
$zdwk