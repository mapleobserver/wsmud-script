// æ–°èŠå¤©ä¿¡æ¯è§¦å‘å™¨
// èŠå¤©ä¿¡æ¯å†…å®¹ï¼š(content)
// å‘è¨€äººï¼š(name)
// å¦‚éœ€æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥åˆ°è®ºå›è§¦å‘å™¨ç‰ˆå—å‘å¸–ã€‚
// é¢‘é“ï¼šä¸–ç•Œ
// å…³é”®å­—ï¼šm|mpz
[if] (content) == mpz || (content) == m
    [if] (:hour) >= 0 && (:hour) < 18
        chat ä»Šæ—¥é—¨æ´¾æˆ˜æœªå¼€å§‹ã€‚
        ($MPT1) = null
        ($MPT2) = null
        ($MPT3) = null
    [else]
        ($now) = (:hour)*3600 + (:minute)*60 + (:second)
        [if] (MPT1) != null
            ($d) = (now) - (MPT1)
            [if] (d) >= 3600
                ($msg1) = ã€å¯å¼€ã€‘(MPA1)ğŸ‰(MPB1) å¯é‡æ–°å¼€å¯
            [else]
                @js ($dm) = parseInt((d)%3600/60)
                ($ds) = (d)%60
                [if] (dm) >= 30
                    //[if] (:hour) >= 22
                    @js ($dm) = parseInt((3600-(dm)*60-(ds))/60)
                    ($ds) = 60-(ds)
                    ($msg1) = ã€å†·å´ã€‘(MPA1)âŒ›ï¸(MPB1) éœ€ç­‰å¾…(dm)åˆ†(ds)ç§’
                [else]
                    ($msg1) = ã€å¼€æˆ˜ã€‘(MPA1)ğŸ‘Š(MPB1) å·²å¼€å§‹(dm)åˆ†(ds)ç§’
        [if] (MPT2) != null
            ($d) = (now) - (MPT2)
            [if] (d) >= 3600
                ($msg2) = ã€å¯å¼€ã€‘(MPA2)ğŸ‰(MPB2) å¯é‡æ–°å¼€å¯
            [else]
                @js ($dm) = parseInt((d)%3600/60)
                ($ds) = (d)%60
                [if] (dm) >= 30
                    @js ($dm) = parseInt((3600-(dm)*60-(ds))/60)
                    ($ds) = 60-(ds)
                    ($msg2) = ã€å†·å´ã€‘(MPA2)âŒ›ï¸(MPB2) éœ€ç­‰å¾…(dm)åˆ†(ds)ç§’
                [else]
                    ($msg2) = ã€å¼€æˆ˜ã€‘(MPA2)ğŸ‘Š(MPB2) å·²å¼€å§‹(dm)åˆ†(ds)ç§’
        [if] (MPT3) != null
            ($d) = (now) - (MPT3)
            [if] (d) >= 3600
                ($msg3) = ã€å¯å¼€ã€‘(MPA3)ğŸ‰(MPB3) å¯é‡æ–°å¼€å¯
            [else]
                @js ($dm) = parseInt((d)%3600/60)
                ($ds) = (d)%60
                [if] (dm) >= 30
                    @js ($dm) = parseInt((3600-(dm)*60-(ds))/60)
                    ($ds) = 60-(ds)
                    ($msg3) = ã€å†·å´ã€‘(MPA3)âŒ›ï¸(MPB3) éœ€ç­‰å¾…(dm)åˆ†(ds)ç§’
                [else]
                    ($msg3) = ã€å¼€æˆ˜ã€‘(MPA3)ğŸ‘Š(MPB3) å·²å¼€å§‹(dm)åˆ†(ds)ç§’
        [if] (msg1) == null && (msg2) == null && (msg3) == null
            chat é—¨æ´¾æˆ˜æœªå¼€å¯
        [else]
            [if] (msg1) != null
                ($msg) = (msg1)
            [if] (msg2) != null
                ($msg) = (msg)\n(msg2)
            [if] (msg3) != null
                ($msg) = (msg)\n(msg3)
            @js WG.Send("chat \n(msg)")