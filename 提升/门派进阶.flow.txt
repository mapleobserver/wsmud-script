//~silent
// è‡ªåŠ¨é¢†æ‚Ÿé—¨æ´¾è¿›é˜¶ä¹¦ç±
// å››åŒºç™½ä¸‰ä¸‰
($localVer) = 2021071101
($changeLog) = æŠ€èƒ½ä¸è¶³1000çº§æ—¶è·³è¿‡ã€‚
($flowName) = é—¨æ´¾è¿›é˜¶
($flowCode) = mpjj
($flowPath) = æå‡
($flowFinder) = æå‡
($repourl) = https://cdn.jsdelivr.net/gh/mapleobserver/wsmud-script
@js ($version) = $.ajax({type: "GET", url: "(repourl)/version.txt", async: false, cache: false}).responseText;
[if] (version) != null
  @js ($remoteVer) = var v = (version);v.(flowCode)
[if] (localVer) < (remoteVer) && (remoteVer) != null
  [if] (UPnum) == null
    ($UPnum) = 0
  [if] (UPnum) < 2
    [if] (UPnum) == 1
      @print æœªè·å–åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤‡ç”¨åœ°å€å†æ¬¡å°è¯•...
      ($repourl) = http://wsmud-cdn.if404.com
    ($UPnum) = (UPnum) + 1
    [if] (flowPath) != æ ¹æ–‡ä»¶å¤¹ && (flowPath) != null
      ($flowSource) = (repourl)/(flowPath)/(flowName).flow.txt
    [else]
      ($flowSource) = (repourl)/(flowName).flow.txt
    [if] (flowFinder) == null
      ($flowFinder) = æ ¹æ–‡ä»¶å¤¹
    @js WG.SendCmd("tm å½“å‰(flowName)ç‰ˆæœ¬ã€(localVer)ã€‘ï¼Œå°†å¼€å§‹è‡ªåŠ¨æ›´æ–°è‡³æœ€æ–°ã€(remoteVer)ã€‘ã€‚")
    ($f_ss)={"name":"(flowName)","source":"(flowSource)","finder":"(flowFinder)"}
    @js var time = Date.parse( new Date());var f=(f_ss);var n=f["name"];var s=f["source"];var fd=f["finder"];WorkflowConfig.removeWorkflow({"name":n,"type":"flow","finder":fd});$.get(s,{stamp:time},function(data,status){WorkflowConfig.createWorkflow(n,data,fd);});
    @wait 1500
    ($log) = âœ…(flowName)å·²æ›´æ–°è‡³æœ€æ–°ç‰ˆã€(remoteVer)ã€‘ï¼Œå³å°†è‡ªåŠ¨è¿è¡Œã€‚
  [else]
    ($log) = â­•(flowName)æš‚æ—¶æ— æ³•æ­£å¸¸æ›´æ–°è‡³ã€(remoteVer)ã€‘ï¼Œç›´æ¥è¿è¡Œå½“å‰ç‰ˆæœ¬ã€(localVer)ã€‘ã€‚
    ($UPnum) = null
  @js WG.SendCmd("tm (log)")
  @print <ord>(log)</ord>
  [if] (UPnum) != null
    @js var f=(f_ss);ManagedPerformerCenter.start(f["name"], FlowStore.get(f["name"]));
    [exit]
[else]
  ($UPnum) = null
  [if] (remoteVer) == null
    ($log) = âš ï¸è·å–è¿œç¨‹ç‰ˆæœ¬å¤±è´¥ï¼Œç»´æŒå½“å‰ç‰ˆæœ¬ä¸å˜ã€‚
  [else]
    ($log) = ğŸš€å¼€å§‹è¿è¡Œ(flowName)ï¼Œå½“å‰ç‰ˆæœ¬ã€(remoteVer)ã€‘ã€‚æ›´æ–°å†…å®¹ï¼š(changeLog)
  @js WG.SendCmd("tm (log)")
  @print <ord>(log)</ord>

[if] (lianxi_map) == null
  ($lianxi_map) = ä½æˆ¿-ç»ƒåŠŸæˆ¿
[if] (chiyao) == null
  ($chiyao) = æ˜¯
//è·å–é—¨æ´¾æ•°æ®
@toolbar jh
@toolbar score
@js $(`span[for=0]`).click()
@await 500
@js ($MPJJname) = $(`span[data-prop=family]`).text()
[if] (MPJJname) == null
  ($MPJJname) = æ­¦å½“æ´¾
#select ($MPJJname) = é—¨æ´¾,æ­¦å½“æ´¾|ä¸å¸®|åå±±æ´¾|å³¨çœ‰æ´¾|å°‘æ—æ´¾|é€é¥æ´¾|æ€æ‰‹æ¥¼,(MPJJname)
#select ($lianxi_map)=ç»ƒä¹ åœ°ç‚¹,ä½æˆ¿-ç»ƒåŠŸæˆ¿|å¸®ä¼š-ç»ƒåŠŸæˆ¿,(lianxi_map)
#select ($chiyao)=æ˜¯å¦åƒæ¸…å¿ƒä¸¹,æ˜¯|å¦,(chiyao)
#config
@stopSSAuto
[if] (MPJJname) == æ­¦å½“æ´¾
  ($mpskills_name) = 'å¤ªææ‹³','æ¢¯äº‘çºµ','å¤ªæç¥åŠŸ','å¤ªæå‰‘æ³•'
  ($mpskills_id) = 'taijiquan','tiyunzong','taijishengong','taijijian'
  ($mpbooks_name) = 'å¤ªææ‹³è¿›é˜¶ç§˜ç±','æ¢¯äº‘çºµè¿›é˜¶ç§˜ç±','å…ˆå¤©å¤ªæè¿›é˜¶ç§˜ç±','å¤ªæå‰‘æ³•è¿›é˜¶ç§˜ç±'
[if] (MPJJname) == ä¸å¸®
  ($mpskills_name) = 'æ··å¤©æ°”åŠŸ','é€é¥æ¸¸','æ‰“ç‹—æ£’','é™é¾™åå…«æŒ'
  ($mpskills_id) = 'huntianqigong','xiaoyaoyou','dagoubang','xianglongzhang'
  ($mpbooks_name) = 'æ··å…ƒå¤©ç½¡è¿›é˜¶ç§˜ç±','é€é¥æ¸¸è¿›é˜¶ç§˜ç±','æ‰“ç‹—æ£’è¿›é˜¶ç§˜ç±','é™é¾™åå…«æŒè¿›é˜¶ç§˜ç±'
[if] (MPJJname) == åå±±æ´¾
  ($mpskills_name) = 'åŠˆçŸ³ç ´ç‰æ‹³','ç´«éœç¥åŠŸ','ç‹‚é£å¿«å‰‘','ç‹¬å­¤ä¹å‰‘'
  ($mpskills_id) = 'poyuquan','zixiashengong','kuangfengkuaijian','dugujiujian'
  ($mpbooks_name) = 'åŠˆçŸ³ç ´ç‰æ‹³è¿›é˜¶ç§˜ç±','ç´«éœç¥åŠŸè¿›é˜¶ç§˜ç±','ç‹‚é£å¿«å‰‘è¿›é˜¶ç§˜ç±','ç‹¬å­¤ä¹å‰‘è¿›é˜¶ç§˜ç±'
[if] (MPJJname) == å³¨çœ‰æ´¾
  ($mpskills_name) = 'ä¹é˜´ç™½éª¨çˆª','è¯¸å¤©åŒ–èº«æ­¥','ä¸´æµåäºŒåº„','å€šå¤©å‰‘æ³•'
  ($mpskills_id) = 'jiuyinbaiguzhao','zhutianbu','linjizhuang','yitianjianfa'
  ($mpbooks_name) = 'ä¹é˜´ç™½éª¨çˆªè¿›é˜¶ç§˜ç±','è¯¸å¤©åŒ–èº«æ­¥è¿›é˜¶ç§˜ç±','ä¸´æµåäºŒåº„è¿›é˜¶ç§˜ç±','å€šå¤©å‰‘æ³•è¿›é˜¶ç§˜ç±'
[if] (MPJJname) == å°‘æ—æ´¾
  ($mpskills_name) = 'ä¸€æŒ‡ç¦…','å°‘æ—èº«æ³•','ç‡ƒæœ¨åˆ€æ³•','æ˜“ç­‹ç»'
  ($mpskills_id) = 'yizhichan','shaolinshenfa','ranmudao','yijinjing'
  ($mpbooks_name) = 'ä¸€æŒ‡ç¦…è¿›é˜¶ç§˜ç±','ä¸€è‹‡æ¸¡æ±Ÿè¿›é˜¶ç§˜ç±','ç‡ƒæœ¨åˆ€æ³•è¿›é˜¶ç§˜ç±','é‡‘åˆšä¸åä½“è¿›é˜¶ç§˜ç±'
[if] (MPJJname) == é€é¥æ´¾
  ($mpskills_name) = 'åŒ—å†¥ç¥åŠŸ','å¤©å±±å…­é˜³æŒ','å‡Œæ³¢å¾®æ­¥','å°æ— ç›¸åŠŸ'
  ($mpskills_id) = 'beimingshengong','liuyangzhang','lingboweibu','xiaowuxianggong'
  ($mpbooks_name) = 'åŒ—å†¥ç¥åŠŸè¿›é˜¶ç§˜ç±','å¤©å±±å…­é˜³æŒè¿›é˜¶ç§˜ç±','å‡Œæ³¢å¾®æ­¥è¿›é˜¶ç§˜ç±','å°æ— ç›¸åŠŸè¿›é˜¶ç§˜ç±'
[if] (MPJJname) == æ€æ‰‹æ¥¼
  ($mpskills_name) = 'ç©¿å¿ƒæŒ','æ€ç”Ÿå†³','è¸é›ªå¯»æ¢…','æ¼«å¤©èŠ±é›¨'
  ($mpskills_id) = 'chuanxinzhang','shashengjue','taxuexunmei','mantianhuayu'
  ($mpbooks_name) = 'ç©¿å¿ƒæŒè¿›é˜¶ç§˜ç±','æ€ç”Ÿå†³è¿›é˜¶ç§˜ç±','è¸é›ªå¯»æ¢…è¿›é˜¶ç§˜ç±','æ¼«å¤©èŠ±é›¨è¿›é˜¶ç§˜ç±'
stopstate
$to (lianxi_map)
//å¾ªç¯åŒ¹é…æŠ€èƒ½
($num)=0
<===
tm å¼€å¯é˜²æ‰çº¿åŠŸèƒ½
@print å¼€å¯é˜²æ‰çº¿åŠŸèƒ½
[while] true
  tm (:hour):(:minute):(:second) æ­£åœ¨è¿›é˜¶é—¨æ´¾æŠ€èƒ½
  @await 30000
===>
[while] (num) < 4
  ($fail) = null
  @toolbar jh
  @toolbar skills
  @js ($skill_name) = [(mpskills_name)][(num)]
  @js ($skill_id) = [(mpskills_id)][(num)]
  @js ($skill_book) = [(mpbooks_name)][(num)]
  @js ($skill_id2) = $(".skill:contains((skill_name))").attr("skid")
  [if] (skill_id2) == (skill_id)
    //æ£€æŸ¥æ˜¯å¦åƒè¯
    [if] (:status food) == false && (chiyao) == æ˜¯ && {bæ¸…å¿ƒä¸¹}? != null
      stopstate
      use {bæ¸…å¿ƒä¸¹}?
    [if] {b(skill_book)}? != null
      use {b(skill_book)}
      @tip æ­å–œä½ é¢†æ‚Ÿäº†|æŒæ¡($fail)è¿˜ä¸å¤Ÿ
      [if] (fail) != null
        ($log) = (skill_name)æœªæ»¡1000çº§ï¼Œæ— æ³•è¿›é˜¶ã€‚
        @print <ord>(log)</ord>
        tm (log)
        @beep
  ($num) = (num) + 1
@recoverSSAuto
[(:status food) == false && {bå†°å¿ƒä¸¹}? != null]use {bå†°å¿ƒä¸¹}?
[(:status fy) == false]use (:eq0)
dazuo