//æ•´åˆäº†ä¹‹å‰çš„å‡ ä¸ªç›¸å…³æµç¨‹ï¼Œä¸€é”®æ”¶å‰²ã€å®‰æ’éšä»å·¥ä½œ
//æ”¶å‰²è¿‡ç¨‹ä¸­åŒ…æ»¡äº†ä¼šè‡ªåŠ¨æ¸…åŒ…å†ç»§ç»­ï¼Œä¸è¿‡æœ‰æ¦‚ç‡å¡ä½ã€‚
//å››åŒºç™½ä¸‰ä¸‰
($localVer) = 2021072801
($changeLog) = ğŸ†• æ–°å¢åªå­˜é±¼é¥µé€‰é¡¹ï¼Œä¼˜åŒ–å–ç‰©å’ŒåŒ…æ»¡å¤„ç†ã€‚
($flowName) = ä¸€é”®æ”¶å‰²
($flowCode) = yjsg
($flowPath) = æ‚åŠ¡
($flowFinder) = æ‚åŠ¡
($repourl) = https://cdn.jsdelivr.net/gh/mapleobserver/wsmud-script
@js ($version) = $.ajax({type: "GET", url: "(repourl)/version.txt", async: false, cache: false}).responseText;
[if] (version) != null
  @js ($remoteVer) = var v = (version);v.(flowCode)
[if] (localVer) < (remoteVer) && (remoteVer) != null
  [if] (UPnum) == null
    ($UPnum) = 0
  [if] (UPnum) < 2
    [if] (UPnum) == 1
      @print æœªè·å–åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤‡ç”¨åœ°å€å†æ¬¡å°è¯•...
      ($repourl) = http://wsmud-cdn.if404.com
    ($UPnum) = (UPnum) + 1
    [if] (flowPath) != æ ¹æ–‡ä»¶å¤¹ && (flowPath) != null
      ($flowSource) = (repourl)/(flowPath)/(flowName).flow.txt
    [else]
      ($flowSource) = (repourl)/(flowName).flow.txt
    [if] (flowFinder) == null
      ($flowFinder) = æ ¹æ–‡ä»¶å¤¹
    @js WG.SendCmd("tm å½“å‰(flowName)ç‰ˆæœ¬ã€(localVer)ã€‘ï¼Œå°†å¼€å§‹è‡ªåŠ¨æ›´æ–°è‡³æœ€æ–°ã€(remoteVer)ã€‘ã€‚")
    ($f_ss)={"name":"(flowName)","source":"(flowSource)","finder":"(flowFinder)"}
    @js var time = Date.parse( new Date());var f=(f_ss);var n=f["name"];var s=f["source"];var fd=f["finder"];WorkflowConfig.removeWorkflow({"name":n,"type":"flow","finder":fd});$.get(s,{stamp:time},function(data,status){WorkflowConfig.createWorkflow(n,data,fd);});
    @wait 1500
    ($log) = âœ…(flowName)å·²æ›´æ–°è‡³æœ€æ–°ç‰ˆã€(remoteVer)ã€‘ï¼Œå³å°†è‡ªåŠ¨è¿è¡Œã€‚
  [else]
    ($log) = â­•(flowName)æš‚æ—¶æ— æ³•æ­£å¸¸æ›´æ–°è‡³ã€(remoteVer)ã€‘ï¼Œç›´æ¥è¿è¡Œå½“å‰ç‰ˆæœ¬ã€(localVer)ã€‘ã€‚
    ($UPnum) = null
  @js WG.SendCmd("tm (log)")
  @print <ord>(log)</ord>
  [if] (UPnum) != null
    @js var f=(f_ss);ManagedPerformerCenter.start(f["name"], FlowStore.get(f["name"]));
    [exit]
[else]
  ($UPnum) = null
  [if] (remoteVer) == null
    ($log) = âš ï¸è·å–è¿œç¨‹ç‰ˆæœ¬å¤±è´¥ï¼Œç»´æŒå½“å‰ç‰ˆæœ¬ä¸å˜ã€‚
  [else]
    ($log) = ğŸš€å¼€å§‹è¿è¡Œ(flowName)ï¼Œå½“å‰ç‰ˆæœ¬ã€(remoteVer)ã€‘ã€‚æ›´æ–°å†…å®¹ï¼š(changeLog)
  @js WG.SendCmd("tm (log)")
  @print <ord>(log)</ord>

[if] (SC_1) == null
  ($SC_1) = ç‹è¯­å«£
  ($SCWork_1) = é‡‡è¯
[if] (SC_2) == null
  ($SC_2) = ç¨‹çµç´ 
  ($SCWork_2) = é‡‡è¯
[if] (SC_3) == null
  ($SC_3) = é’é’
  ($SCWork_3) = é‡‡è¯
[if] (ItemQuality) == null
  ($ItemQuality) == å…¨éƒ¨
#input ($SC_1) = éšä»1,(SC_1)
#select ($SCWork_1) = åŠ¨ä½œ,é‡‡è¯|é’“é±¼,(SCWork_1)
#input ($SC_2) = éšä»2,(SC_2)
#select ($SCWork_2) = åŠ¨ä½œ,é‡‡è¯|é’“é±¼,(SCWork_2)
#input ($SC_3) = éšä»3,(SC_3)
#select ($SCWork_3) = åŠ¨ä½œ,é‡‡è¯|é’“é±¼,(SCWork_3)
#select ($ItemQuality) = æœ€å¤šå–åˆ°,åªå­˜é±¼é¥µ|å…¨éƒ¨|ç´«|é»„|è“|ç»¿|ç™½,(ItemQuality)
#input ($SCdiao) = é±¼é¥µç»™è°(æ²¡æœ‰å¯ä»¥ä¸å¡«),(SCdiao)
#config
stopstate
stopstate;jh fam 0 start;go west;go west;go north;go enter
team out
[if] {r(SC_1)}? != null
  team with {r(SC_1)}?
[if] {r(SC_2)}? != null
  team with {r(SC_2)}?
[if] {r(SC_3)}? != null
  team with {r(SC_3)}?
go northeast
team out
($sc) = '(SC_1)','(SC_2)','(SC_3)'
($work) = '(SCWork_1)','(SCWork_2)','(SCWork_3)'
($num) = 0
@cmdDelay 500
[while] (num) < 3 && (ItemQuality) != åªå­˜é±¼é¥µ
  @js ($s) = [(sc)][(num)]
  @js ($w) = [(work)][(num)]
  @print (s) (w)
  ($get) = true
  [if] (w) == é‡‡è¯
    ($w) = cai
  [else]
    ($w) = diao
  [if] (s) != null && {r(s)}? != null
    dc {r(s)}? stopstate;select {r(s)}?;pack {r(s)}?
  [else]
     ($num) = (num) + 1
     [continue]
  @dialog
  <---
  [if] (get) == true
    @tip ç»™äº†ä½ |(:name)èº«ä¸Šä¸œè¥¿($bagfull)äº†
    [if] (bagfull) != null
      @print èƒŒåŒ…å·²æ»¡ï¼Œå…ˆæ¸…åŒ…ã€‚
      @await 1000
      @tidyBag
      ($bagfull) = null
      @await 2000
      stopstate;jh fam 0 start;go west;go west;go north;go enter;go northeast
      @await 1000
      select {r(s)}?;pack {r(s)}?
      @dialog
      @print (cmd)
      (cmd)
      ($get) = false
  --->
  ($get) = false
  ($cmd) = null
  [if] {dé²¢é±¼w%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé²¢é±¼w%#} {dé²¢é±¼w%}
  [if] {dè‰é±¼w%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dè‰é±¼w%#} {dè‰é±¼w%}
  [if] {dé²¤é±¼w%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé²¤é±¼w%#} {dé²¤é±¼w%}
  [if] {dèŠ¦èŸw%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dèŠ¦èŸw%#} {dèŠ¦èŸw%}
  [if] {då±±æ¥‚å¶w%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {då±±æ¥‚å¶w%#} {då±±æ¥‚å¶w%}
  [if] {då½“å½’w%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {då½“å½’w%#} {då½“å½’w%}
  [if] (cmd) != null
    (cmd)
    ($get) = true
    @await 1000
  [if] (ItemQuality) == ç™½
    ($get) = false
    dc {r(s)} (w)
    ($num) = (num) + 1
    [continue]
  ($get) = false
  ($cmd) = null
  [if] {dé²®é±¼g%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé²®é±¼g%#} {dé²®é±¼g%}
  [if] {dé³Šé±¼g%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé³Šé±¼g%#} {dé³Šé±¼g%}
  [if] {dé²‚é±¼g%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé²‚é±¼g%#} {dé²‚é±¼g%}
  [if] {dæŸ´èƒ¡g%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dæŸ´èƒ¡g%#} {dæŸ´èƒ¡g%}
  [if] {dé‡‘é“¶èŠ±g%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé‡‘é“¶èŠ±g%#} {dé‡‘é“¶èŠ±g%}
  [if] {dçŸ³æ¥ å¶g%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dçŸ³æ¥ å¶g%#} {dçŸ³æ¥ å¶g%}
  [if] (cmd) != null
    (cmd)
    ($get) = true
    @await 1000
  [if] (ItemQuality) == ç»¿
    ($get) = false
    dc {r(s)} (w)
    ($num) = (num) + 1
    [continue]
  ($get) = false
  ($cmd) = null
  [if] {då¤ªæ¹–é“¶é±¼b%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {då¤ªæ¹–é“¶é±¼b%#} {då¤ªæ¹–é“¶é±¼b%}
  [if] {dé»„é¢¡é±¼b%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé»„é¢¡é±¼b%#} {dé»„é¢¡é±¼b%}
  [if] {dé»„é‡‘é³‰b%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé»„é‡‘é³‰b%#} {dé»„é‡‘é³‰b%}
  [if] {dèŒ¯è‹“b%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dèŒ¯è‹“b%#} {dèŒ¯è‹“b%}
  [if] {dæ²‰é¦™b%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dæ²‰é¦™b%#} {dæ²‰é¦™b%}
  [if] {dç†Ÿåœ°é»„b%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dç†Ÿåœ°é»„b%#} {dç†Ÿåœ°é»„b%}
  [if] (cmd) != null
    (cmd)
    ($get) = true
    @await 1000
  [if] (ItemQuality) == è“
    ($get) = false
    dc {r(s)} (w)
    ($num) = (num) + 1
    [continue]
  ($get) = false
  ($cmd) = null
  [if] {dè™¹é³Ÿy%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dè™¹é³Ÿy%#} {dè™¹é³Ÿy%}
  [if] {dåå¤©åˆ€y%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dåå¤©åˆ€y%#} {dåå¤©åˆ€y%}
  [if] {då­”é›€é±¼y%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {då­”é›€é±¼y%#} {då­”é›€é±¼y%}
  [if] {då†¬è™«å¤è‰y%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {då†¬è™«å¤è‰y%#} {då†¬è™«å¤è‰y%}
  [if] {dç»œçŸ³è—¤y%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dç»œçŸ³è—¤y%#} {dç»œçŸ³è—¤y%}
  [if] {dä¹é¦™è™«y%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dä¹é¦™è™«y%#} {dä¹é¦™è™«y%}
  [if] (cmd) != null
    (cmd)
    ($get) = true
    @await 1000
  [if] (ItemQuality) == é»„
    ($get) = false
    dc {r(s)} (w)
    ($num) = (num) + 1
    [continue]
  ($get) = false
  ($cmd) = null
  [if] {dç½—æ±‰é±¼p%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dç½—æ±‰é±¼p%#} {dç½—æ±‰é±¼p%}
  [if] {dé“¶é¾™é±¼p%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé“¶é¾™é±¼p%#} {dé“¶é¾™é±¼p%}
  [if] {dé»‘é¾™é±¼p%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé»‘é¾™é±¼p%#} {dé»‘é¾™é±¼p%}
  [if] {då‡Œéœ„èŠ±p%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {då‡Œéœ„èŠ±p%#} {då‡Œéœ„èŠ±p%}
  [if] {dä½•é¦–ä¹Œp%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dä½•é¦–ä¹Œp%#} {dä½•é¦–ä¹Œp%}
  [if] {däººå‚p%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {däººå‚p%#} {däººå‚p%}
  [if] (cmd) != null
    (cmd)
    ($get) = true
    @await 1000
  [if] (ItemQuality) == ç´«
    ($get) = false
    dc {r(s)} (w)
    ($num) = (num) + 1
    [continue]
  ($get) = false
  ($cmd) = null
  [if] {då·¨éª¨èˆŒé±¼o%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {då·¨éª¨èˆŒé±¼o%#} {då·¨éª¨èˆŒé±¼o%}
  [if] {då¸ç‹è€è™é­Ÿo%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {då¸ç‹è€è™é­Ÿo%#} {då¸ç‹è€è™é­Ÿo%}
  [if] {dä¸ƒæ˜Ÿåˆ€é±¼o%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dä¸ƒæ˜Ÿåˆ€é±¼o%#} {dä¸ƒæ˜Ÿåˆ€é±¼o%}
  [if] {dçµèŠo%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dçµèŠo%#} {dçµèŠo%}
  [if] {då¤©ä»™è—¤o%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {då¤©ä»™è—¤o%#} {då¤©ä»™è—¤o%}
  [if] {dç›˜é¾™å‚o%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dç›˜é¾™å‚o%#} {dç›˜é¾™å‚o%}
  [if] (cmd) != null
    (cmd)
    ($get) = true
    @await 1000
  ($get) = false
  dc {r(s)} (w)
  ($num) = (num) + 1
($get) = false
@tidyBag

// ç»™éšä»é±¼é¥µ
[if] (SCdiao) != null
  @await 2000
  stopstate;jh fam 0 start;go west;go west;go north;go enter;go northeast
  @await 2000
  ($s) = (SCdiao)
  [if] (s) == (SC_1)
    ($w) = (SCWork_1)
  [else if] (s) == (SC_2)
    ($w) = (SCWork_2)
  [else]
    ($w) = (SCWork_3)
  dc {r(s)}? stopstate;pack {r(s)}?;
  @dialog
  ($cmd) = null
  [if] {dé±¼é¥µo%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé±¼é¥µo%#}? {dé±¼é¥µo%}?
  [if] {dé±¼é¥µp%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé±¼é¥µp%#}? {dé±¼é¥µp%}?
  [if] {dé±¼é¥µy%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé±¼é¥µy%#}? {dé±¼é¥µy%}?
  [if] {dé±¼é¥µb%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé±¼é¥µb%#}? {dé±¼é¥µb%}?
  [if] {dé±¼é¥µg%}? != null
    ($cmd) = (cmd);dc {r(s)}? give (:id) {dé±¼é¥µg%#}? {dé±¼é¥µg%}?
  [if] (cmd) != null
    (cmd)
  @await 2000
  dc {r(s)}? stopstate;trade {r(s)}?;
  @await 500
  ($cmd) = null
  [if] {bé±¼é¥µo}? != null
    ($cmd) = (cmd);give {r(s)}? {bé±¼é¥µo#}? {bé±¼é¥µo}?
  [if] {bé±¼é¥µp}? != null
    ($cmd) = (cmd);give {r(s)}? {bé±¼é¥µp#}? {bé±¼é¥µp}?
  [if] {bé±¼é¥µy}? != null
    ($cmd) = (cmd);give {r(s)}? {bé±¼é¥µy#}? {bé±¼é¥µy}?
  [if] {bé±¼é¥µb}? != null
    ($cmd) = (cmd);give {r(s)}? {bé±¼é¥µb#}? {bé±¼é¥µb}?
  [if] {bé±¼é¥µg}? != null
    ($cmd) = (cmd);give {r(s)}? {bé±¼é¥µg#}? {bé±¼é¥µg}?
  [if] (cmd) != null
    (cmd)
  [if] (w) == é‡‡è¯
    dc {r(s)} cai
  [else]
    dc {r(s)} diao
$zdwk