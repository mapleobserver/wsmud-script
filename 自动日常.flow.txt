//~silent
//è‡ªåŠ¨æ—¥å¸¸åˆå¹¶ç‰ˆ
//å››åŒºç™½ä¸‰ä¸‰
//1.è‡ªåŠ¨å¸ˆé—¨ã€‚2.è‡ªåŠ¨è°ƒç”¨è‡ªåŠ¨è¿½æ•å’Œè‡ªåŠ¨æ­¦é“ä¸¤ä¸ªæµç¨‹ï¼Œå¯é€‰æ‹©å‰¯æœ¬è‡ªåŠ¨è„šæœ¬ã€æ‰«è¡æˆ–è·³è¿‡ã€‚3.å½“é“ºè´­ä¹°ã€è¯·å®‰ã€‚4.æ—¥å¸¸å¼€å§‹ç»“æŸè¯­éŸ³æ’­æŠ¥æé†’ã€‚5.æ–°å¢æ˜¥èŠ‚å…è´¹æ‰«è¡æ¨¡å¼ã€‚
//ä½¿ç”¨callæ–¹å¼è°ƒç”¨ï¼Œå¦‚æœæƒ³åœ¨ç‰ˆæœ¬æ›´æ–°åç»§ç»­é™é»˜è¿è¡Œï¼Œè¯·åœ¨ call è‡ªåŠ¨æ—¥å¸¸ åé¢åŠ ä¸Šå‚æ•°ï¼šcallmode

($localVer) = 2021112602
($changeLog) = ğŸ†• ä¼˜åŒ–callæ–¹å¼è¿è¡Œè¿‡ç¨‹ï¼›è¿½æ•å¢åŠ ä¸å›æ­¦åº™æ¢å¤å’Œæ˜¯å¦åˆ°å¡”é¡¶æ¸…è™šå¼±åŠŸèƒ½ï¼›æ–°å¢ç²¾åŠ›æº¢å‡ºæ£€æµ‹ã€‚ğŸŒŸ è¯·å®‰è¯†åˆ«å‰‘ç¥åˆ€çš‡ç­‰ç§°å·ï¼›æ­¦é“å¡”æ¢å¤æ–¹å¼æ–°å¢ã€é€†å¤©é“ã€‘å’Œã€å¤§é“æ— æã€‘ï¼›æ–°å¢ã€å¤å®—é—¨é—å€ã€‘å‰¯æœ¬å’Œå•ç‹¬æ‰«è¡ã€‚
($flowName) = è‡ªåŠ¨æ—¥å¸¸
($flowCode) = zdrc
($flowPath) = æ ¹æ–‡ä»¶å¤¹
($flowFinder) = æ ¹æ–‡ä»¶å¤¹
//($repourl) = https://cdn.jsdelivr.net/gh/mapleobserver/wsmud-script
($repourl) = http://wsmud-cdn.if404.com
@js ($version) = $.ajax({type: "GET", url: "(repourl)/version.txt", async: false, cache: false}).responseText;
[if] (version) != null
  @js ($remoteVer) = var v = (version);v.(flowCode)
[if] (localVer) < (remoteVer) && (remoteVer) != null
  [if] (UPnum) == null
    ($UPnum) = 0
  [if] (UPnum) < 2
    [if] (UPnum) == 1
      @print æœªè·å–åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤‡ç”¨åœ°å€å†æ¬¡å°è¯•...
      ($repourl) = http://wsmud-cdn.if404.com
    ($UPnum) = (UPnum) + 1
    [if] (flowPath) != æ ¹æ–‡ä»¶å¤¹ && (flowPath) != null
      ($flowSource) = (repourl)/(flowPath)/(flowName).flow.txt
    [else]
      ($flowSource) = (repourl)/(flowName).flow.txt
    [if] (flowFinder) == null
      ($flowFinder) = æ ¹æ–‡ä»¶å¤¹
    @js WG.SendCmd("tm å½“å‰(flowName)ç‰ˆæœ¬ã€(localVer)ã€‘ï¼Œå°†å¼€å§‹è‡ªåŠ¨æ›´æ–°è‡³æœ€æ–°ã€(remoteVer)ã€‘ã€‚")
    ($f_ss)={"name":"(flowName)","source":"(flowSource)","finder":"(flowFinder)"}
    @js var time = Date.parse( new Date());var f=(f_ss);var n=f["name"];var s=f["source"];var fd=f["finder"];WorkflowConfig.removeWorkflow({"name":n,"type":"flow","finder":fd});$.get(s,{stamp:time},function(data,status){WorkflowConfig.createWorkflow(n,data,fd);});
    @wait 1500
    ($log) = âœ…(flowName)å·²æ›´æ–°è‡³æœ€æ–°ç‰ˆã€(remoteVer)ã€‘ï¼Œå³å°†è‡ªåŠ¨è¿è¡Œã€‚
  [else]
    ($log) = â­•(flowName)æš‚æ—¶æ— æ³•æ­£å¸¸æ›´æ–°è‡³ã€(remoteVer)ã€‘ï¼Œç›´æ¥è¿è¡Œå½“å‰ç‰ˆæœ¬ã€(localVer)ã€‘ã€‚
    ($UPnum) = null
  @js WG.SendCmd("tm (log)")
  @print <ord>(log)</ord>
  [if] (UPnum) != null
    [if] (arg0) == callmode
      tm ç»´æŒcallæ–¹å¼è¿è¡Œ
      @js WG.zmlfire({"name":"é‡æ–°è¿è¡Œ","zmlRun":"//~silent\n@call è‡ªåŠ¨æ—¥å¸¸","zmlShow":0,"zmlType":"1"})
    [else]
      @js var f=(f_ss);ManagedPerformerCenter.start(f["name"], FlowStore.get(f["name"]));
    [exit]
[else]
  ($UPnum) = null
  [if] (remoteVer) == null
    ($log) = âš ï¸è·å–è¿œç¨‹ç‰ˆæœ¬å¤±è´¥ï¼Œç»´æŒå½“å‰ç‰ˆæœ¬ä¸å˜ã€‚
  [else]
    ($log) = ğŸš€å¼€å§‹è¿è¡Œ(flowName)ï¼Œå½“å‰ç‰ˆæœ¬ã€(remoteVer)ã€‘ã€‚æ›´æ–°å†…å®¹ï¼š(changeLog)
  @js WG.SendCmd("tm (log)")
  @print <ord>(log)</ord>

// 10æœˆ8æ—¥è‡ªåŠ¨æ¢å¤æ­£å¸¸æ¨¡å¼
//[if] (:date)>=8 && (:hour)>=5
//  ($RCMode) = æ­£å¸¸æ¨¡å¼

//æ£€æµ‹çŠ¶æ€
@js ($fbroom) = '(:room)'.indexOf('å‰¯æœ¬åŒºåŸŸ')
[if] (fbroom) != -1 || (:state)==æ¨æ¼” || (:state)==é¢†æ‚Ÿ
  ($alert_start) = æ­£åœ¨(:state)ï¼Œåœæ­¢è‡ªåŠ¨æ—¥å¸¸ï¼
  [(fbroom) != -1]($alert_start) = æ­£åœ¨å‰¯æœ¬ä¸­ï¼Œåœæ­¢è‡ªåŠ¨æ—¥å¸¸ï¼
  @js WG.SendCmd("tm (alert_start)")
  @print <ord>(alert_start)</ord>
  [exit]

// è‡ªåŠ¨æ—¥å¸¸æ¨¡å¼
[if] (RCMode) == null
  ($RCMode) = æ­£å¸¸æ¨¡å¼
[if] (RCMode) == æ˜¥èŠ‚æ¨¡å¼
  ($RCMode) = èŠ‚æ—¥å…è´¹æ¨¡å¼
#select ($RCMode) = å½“å‰æ¨¡å¼<ord>(RCMode)</ord>ï¼Œè‡ªåŠ¨æ—¥å¸¸çš„æ‰§è¡Œæ¨¡å¼,æ­£å¸¸æ¨¡å¼|èŠ‚æ—¥å…è´¹æ¨¡å¼,(RCMode)
// æ˜¯å¦ç»Ÿè®¡æ”¶ç›Š
[if] (RecordG) == null
  ($RecordG) = æ˜¯
#select ($RecordG) = æ˜¯å¦æ˜¾ç¤ºç»Ÿè®¡æ”¶ç›Š,æ˜¯|å¦,(RecordG)

// å¸ˆé—¨ä»»åŠ¡
@toolbar jh
@toolbar tasks
@task å¸ˆé—¨å§”æ‰˜ç›®å‰å®Œæˆ($smnum)/20ä¸ªï¼Œå…±è¿ç»­å®Œæˆ($smComboN)ä¸ª|å¸ˆé—¨å§”æ‰˜ä½ å»å¯»æ‰¾($smtype)ï¼Œå…±è¿ç»­å®Œæˆ($smComboN)ä¸ª
[if] (SMtasks) == null
  ($SMtasks) = æ­£å¸¸è¿›è¡Œ
[if] (smComboN) >= 100 && (SMtasks) != æ— è§†ç¯æ•°
  [if] (:hour) <5 || (:hour) >= 20
    ($SMtasks) = æ­£å¸¸è¿›è¡Œ
    #select ($SMtasks) = <ord>å¤„äºæŠ¢é¦–å¸­æ—¶æ®µï¼Œå¸ˆé—¨ä»»åŠ¡å¯æ­£å¸¸è¿›è¡Œ</ord>,æ­£å¸¸è¿›è¡Œ|è·³è¿‡|æ— è§†ç¯æ•°,æ­£å¸¸è¿›è¡Œ
  [else]
    ($SMtasks) = è·³è¿‡
    #select ($SMtasks) = å¸ˆé—¨å·²è¿(smComboN)æ¬¡ï¼Œ<ord>æ˜¯å¦å…ˆè·³è¿‡ç­‰æ™šä¸ŠæŠ¢é¦–å¸­</ord>,æ­£å¸¸è¿›è¡Œ|è·³è¿‡|æ— è§†ç¯æ•°,è·³è¿‡
[else if] (smComboN) < 30 && (SMtasks) != æ— è§†ç¯æ•°
  ($SMtasks) = æ­£å¸¸è¿›è¡Œ
  #select ($SMtasks) = å¸ˆé—¨ä»»åŠ¡æ­£å¸¸è¿›è¡Œæˆ–è·³è¿‡(æŠ¢é¦–å¸­),æ­£å¸¸è¿›è¡Œ|è·³è¿‡|æ— è§†ç¯æ•°,æ­£å¸¸è¿›è¡Œ
[else]
  #select ($SMtasks) = å¸ˆé—¨ä»»åŠ¡æ­£å¸¸è¿›è¡Œæˆ–è·³è¿‡(æŠ¢é¦–å¸­),æ­£å¸¸è¿›è¡Œ|è·³è¿‡|æ— è§†ç¯æ•°,(SMtasks)

// è¿½æ•è‡ªå®šä¹‰å‚æ•°
[if] (ZByes) == null || (ZByes) == æ˜¯
  ($ZByes) = æ­£å¸¸æ¨¡å¼
[if] (ZBsx) == null
  ($ZBsx) = è½¬ä¸ºæ­£å¸¸æ¨¡å¼
[if] (ZBWaitCD) == null
  ($ZBWaitCD) = 30
[if] (ZBcdskill) == null
  ($ZBcdskill) = null
[if] (ZBBefore) == null
  ($ZBBefore) = $eq 1
[if] (DieToReset) == null
  ($DieToReset) = å·²å…³é—­
[if] (ZBrenew) == null
  ($ZBrenew) = æ˜¯
  [if] (:grade) == æ­¦å¸ || (:grade) == æ­¦ç¥ || (:grade) == å‰‘ç¥ || (:grade) == åˆ€çš‡ || (:grade) == å…µä¸» || (:grade) == æˆ˜ç¥
    ($ZBrenew) = å¦
[if] (ZBxuruo) == null
  ($ZBxuruo) = å¦
#select ($ZByes) = è¿½æ•æ–¹å¼(ç™¾å§“é€‰è·³è¿‡),æ­£å¸¸æ¨¡å¼|å¿«é€Ÿæ‰«è¡|è·³è¿‡,(ZByes)
#select ($ZBsx) = å¿«é€Ÿæ‰«è¡è¾¾åˆ°ä¸Šé™åå¤„ç†æ–¹å¼,è½¬ä¸ºæ­£å¸¸æ¨¡å¼|è‡ªåŠ¨æ”¾å¼ƒå†æ‰«è¡,(ZBsx)
#input ($ZBBefore) = è¿½æ•å‰æ‰§è¡Œå‘½ä»¤(ç”¨è‹±æ–‡;éš”å¼€),(ZBBefore)
#select ($ZBrenew) = æ¯æ¬¡è¿½æ•æ˜¯å¦å…ˆå›æ­¦åº™æ¢å¤,æ˜¯|å¦,(ZBrenew)
#select ($ZBxuruo) = æ˜¯å¦åˆ°æ­¦é“å¡”é¡¶å±‚æ¸…è™šå¼±,æ˜¯|å¦,(ZBxuruo)
#input ($ZBWaitCD) = ä»æ­¤æ¬¡è¿½æ•å¼€å§‹ï¼Œç­‰å¾…æŠ€èƒ½å†·å´,(ZBWaitCD)
#input ($ZBcdskill) = éœ€è¦å†·å´çš„æŠ€èƒ½ä½¿ç”¨è‹±æ–‡é€—å·éš”å¼€æˆ–ä»¥^å¼€å¤´è¿‡æ»¤ä¸éœ€è¦çš„ï¼Œå¡«nullå…¨éƒ¨ä¸ç­‰å†·å´,(ZBcdskill)
#select ($DieToReset) = æ­»äº¡è‡ªåŠ¨é‡ç½®è¿½æ•ç¯æ•°,å·²å¼€å¯|å·²å…³é—­,(DieToReset)

// æ­¦é“è‡ªå®šä¹‰å‚æ•°
[if] (WudaoMode) == null || (WudaoMode) = æ­£å¸¸è‚å¡”
  ($WudaoMode) = æ­£å¸¸æ¨¡å¼
[if] (WudaoRenew) == null
  ($WudaoRenew) = å¤©åœ°è¯€
[if] (WudaoWaitCDLevel) == null
  ($WudaoWaitCDLevel) = 30
[if] (WudaoManualMaxLevel) == null
  ($WudaoManualMaxLevel) = 84
[if] (WudaoWaitCDExp) == null
  ($WudaoWaitCDExp) = ^none
[if] (WudaoBefore) == null
  ($WudaoBefore) = $eq 1
#select ($WudaoMode)=æ­¦é“å¡”æ¨¡å¼<ord>(å¿«é€Ÿæ¨¡å¼å»ºè®®è‡³å°‘å·²æœ‰è¡€åˆ€ä¹é˜´)</ord>,æ­£å¸¸æ¨¡å¼|å¿«é€Ÿæ¨¡å¼|åªæ‰“å¡”ä¸»,(WudaoMode)
#select ($WudaoRenew)=<hiz>å¿«é€Ÿæ¨¡å¼</hiz>æ¢å¤å†…åŠ›æ–¹å¼,æ­¦åº™æ¢å¤|å¤©åœ°è¯€|é€†å¤©é“|å¤§é“æ— æ,(WudaoRenew)
#input ($WudaoBefore)=æ‰“å¡”å‰æ‰§è¡Œå‘½ä»¤(ç”¨è‹±æ–‡;éš”å¼€),(WudaoBefore)
#input ($WudaoWaitCDExp)=æ‰“å¡”ç­‰å¾…ä»¥ä¸‹æŠ€èƒ½å†·å´,(WudaoWaitCDExp)
#input ($WudaoWaitCDLevel)=ä»æ­¤å±‚å¼€å§‹ï¼Œç­‰å¾…æŠ€èƒ½å†·å´,(WudaoWaitCDLevel)
#input ($WudaoManualMaxLevel)=ä»æ­¤å±‚å¼€å§‹å¿«é€Ÿæ‰«è¡,(WudaoManualMaxLevel)

// å‰¯æœ¬è‡ªå®šä¹‰å‚æ•°
[if] (FBBefore) == null
  ($FBBefore) = $eq 1
[if] (FBnum) == null
  ($FBnum) = 20
[if] (DungeonHpThreshold) == null
  ($DungeonHpThreshold) = 50
[if] (DungeonWaitSkillCD) == null
  ($DungeonWaitSkillCD) = æ‰“å¼€
[if] (DungeonBagCleanWay) == null
  ($DungeonBagCleanWay) = å­˜ä»“åŠå”®å–
#input ($FBBefore)=å‰¯æœ¬å‰æ‰§è¡Œå‘½ä»¤(ç”¨è‹±æ–‡;éš”å¼€),(FBBefore)
#select ($FBName) = å‰¯æœ¬(ä¸Šæ¬¡æ‰€é€‰:<ord>(FBName)</ord>),è´¢ä¸»å®¶(ç®€å•)|è´¢ä¸»å®¶(å›°éš¾)|ä¸½æ˜¥é™¢|æµæ°“å··|æµæ°“å··(ç»„é˜Ÿ)|å…µè¥|åº„åºœ|é³Œæ‹œåºœ|å¤©åœ°ä¼š|ç¥é¾™æ•™|ç¥é¾™æ•™(ç»„é˜Ÿ)|å…³å¤–|æ¸©åºœ|äº”æ¯’æ•™|äº”æ¯’æ•™(ç»„é˜Ÿ)|æ’å±±|é’åŸå±±|è¡¡å±±|æ³°å±±|åµ©å±±|äº‘æ¢¦æ²¼æ³½|äº‘æ¢¦æ²¼æ³½(ç»„é˜Ÿ)|æ¡ƒèŠ±å²›(ç®€å•)|æ¡ƒèŠ±å²›(å›°éš¾)|ç™½é©¼å±±|ç™½é©¼å±±(ç»„é˜Ÿ)|æ˜Ÿå®¿æµ·|å†°ç«å²›(ç®€å•)|å†°ç«å²›(å›°éš¾)|å†°ç«å²›(å·æ¸¡)|ç§»èŠ±å®«(ç®€å•)|ç§»èŠ±å®«(å›°éš¾)|ç§»èŠ±å®«(å·æ¸¡)|ç‡•å­å(ç®€å•)|ç‡•å­å(å›°éš¾)|ç‡•å­å(å·ä¹¦)|é»‘æœ¨å´–(ç®€å•)|é»‘æœ¨å´–(å›°éš¾)|ç¼¥ç¼ˆå³°(å›°éš¾)|ç¼¥ç¼ˆå³°(å·æ¸¡)|å…‰æ˜é¡¶|å…‰æ˜é¡¶(ç»„é˜Ÿ)|å…‰æ˜é¡¶(å·æ¸¡)|å¤©é¾™å¯º(å›°éš¾)|å¤©é¾™å¯º(å·æ¸¡)|è¡€åˆ€é—¨|å¤å¢“æ´¾(ç®€å•)|å¤å¢“æ´¾(å›°éš¾)|å¤å¢“æ´¾(å›°éš¾å·æ¸¡)|åå±±è®ºå‰‘|ä¾ å®¢å²›|å‡€å¿µç¦…å®—(ç®€å•)|å‡€å¿µç¦…å®—(å›°éš¾)|å‡€å¿µç¦…å®—(å›°éš¾å·æ¸¡)|æ…ˆèˆªé™æ–‹(ç®€å•)|æ…ˆèˆªé™æ–‹(å›°éš¾)|æ…ˆèˆªé™æ–‹(ç®€å•å·æ¸¡)|æ…ˆèˆªé™æ–‹(å›°éš¾å·æ¸¡)|é˜´é˜³è°·|é˜´é˜³è°·(å·æ¸¡)|æˆ˜ç¥æ®¿(ç®€å•)|æˆ˜ç¥æ®¿(å›°éš¾)|æˆ˜ç¥æ®¿(ç®€å•å·æ¸¡)|æˆ˜ç¥æ®¿(å›°éš¾å·æ¸¡)|å¤å®—é—¨é—å€,(FBName)
#input ($FBnum) = <ord>éœ€è¦å®Œæˆçš„æ¬¡æ•°</ord>,(FBnum)
#select ($FBWay) = åˆ·æœ¬æ–¹å¼ï¼ˆé€‰è‡ªåŠ¨å‰å…ˆç¡®å®šæ’ä»¶æ”¯æŒï¼‰,è‡ªåŠ¨|æ‰«è¡|è·³è¿‡å‰¯æœ¬,(FBWay)
#select ($DungeonHpThreshold) = å‰¯æœ¬å†…ç–—ä¼¤ï¼Œå½“æ°”è¡€ä½äºç™¾åˆ†æ¯”,100|90|80|70|60|50|40|30|20|10,(DungeonHpThreshold)
#select ($DungeonWaitSkillCD) = Bossæˆ˜å‰ç­‰å¾…æŠ€èƒ½å†·å´,æ‰“å¼€|å…³é—­,(DungeonWaitSkillCD)
#select ($DungeonBagCleanWay) = èƒŒåŒ…æ¸…ç†æ–¹æ¡ˆ,ä¸æ¸…ç†|å”®å–|å­˜ä»“åŠå”®å–,(DungeonBagCleanWay)

// èµŒåœºå…‘æ¢æ®‹é¡µ
[if] (Duihuan) == null
  ($Duihuan) = ä¸å…‘æ¢
#select ($Duihuan) = <hiz>èµŒåœºå…‘æ¢å‰¯æœ¬æ®‹é¡µç‰©å“</hiz>,ä¸å…‘æ¢|æ— å¿µç¦…åŠŸ|é•¿ç”Ÿè¯€|æ…ˆèˆªå‰‘å…¸|é˜´é˜³ä¹è½¬|æˆ˜ç¥å›¾å½•|ç¥å™¨ç¢ç‰‡,(Duihuan)

// å¤å®—é—¨é—å€å•ç‹¬æ‰«è¡
[if] (GmpSD) == null
  ($GmpSD) = è·³è¿‡
[if] (GmpSDnum) == null
  ($GmpSDnum) = 10
#select ($GmpSD) = <ord>å¤å®—é—¨é—å€å•ç‹¬æ‰«è¡</ord>,è·³è¿‡|æ‰«è¡,(GmpSD)
#input ($GmpSDnum) = <ord>å¤å®—é—¨é—å€æ‰«è¡æ¬¡æ•°</ord>,(GmpSDnum)

// è¯·å®‰
[if] (RC_qingan) == null
  ($RC_qingan) = è¯·å®‰
[if] (:grade) == æ­¦ç¥ || (:grade) == å‰‘ç¥ || (:grade) == åˆ€çš‡ || (:grade) == å…µä¸» || (:grade) == æˆ˜ç¥
  ($RC_qingan) = è·³è¿‡
#select ($RC_qingan) = æ˜¯å¦ç»™é¦–å¸­è¯·å®‰,è¯·å®‰|è·³è¿‡,(RC_qingan)

// æ—¥å¸¸ç»“æŸååŠ¨ä½œ
[if](RCAfter_action) == null
  ($RCAfter_action) = $zdwk
#input ($RCAfter_action) = æ—¥å¸¸ç»“æŸåå‘½ä»¤(ç”¨è‹±æ–‡;éš”å¼€),(RCAfter_action)

// è¯­éŸ³æ’­æŠ¥
[if] (TTSover) == null
  ($TTSover) = æ’­æŠ¥
#select ($TTSover) = æ—¥å¸¸ç»“æŸåè¯­éŸ³æ’­æŠ¥æé†’,æ’­æŠ¥|ä¸æ’­æŠ¥,(TTSover)

// è¿è¡Œæ¨¡å¼
#input ($callmode) = æµç¨‹è¿è¡Œæ¨¡å¼(æ— éœ€æ”¹åŠ¨),æ­£å¸¸

#config

// åˆ¤æ–­è¿è¡Œæ¨¡å¼å’Œå‰¯æœ¬æ–¹å¼
[if] (callmode) == null
  @js ($fbtd) = "(FBName)".replace(/\(|\)/g,"").indexOf("å·æ¸¡")
  //[if] (fbtd) == -1 && (FBWay) == è‡ªåŠ¨
    //tm å½“å‰å‰¯æœ¬ä¸ºè‡ªåŠ¨æ¨¡å¼ï¼Œæµç¨‹ä»callæ–¹å¼è½¬ä¸ºæ­£å¸¸æ¨¡å¼ã€‚
    //@js ManagedPerformerCenter.start("è‡ªåŠ¨æ—¥å¸¸", FlowStore.get("è‡ªåŠ¨æ—¥å¸¸"));
    //[exit]

// è·å–è§’è‰²å
[if] (TTSover) == æ’­æŠ¥
  $tts å¼€å§‹(:name)çš„è‡ªåŠ¨æ—¥å¸¸ã€‚

// åœæ­¢ï¼Œæ¸…åŒ…
@stopSSAuto
stopstate
@tidyBag
@await 2000

// å¸ˆé—¨
[if] (SMtasks) == æ­£å¸¸è¿›è¡Œ || (SMtasks) == æ— è§†ç¯æ•°
  $sm
  @tip ä½ å…ˆå»ä¼‘æ¯ä¸€ä¸‹å§
[else]
  ($alert_sm) = æ ¹æ®è®¾ç½®ï¼Œå·²è·³è¿‡å¸ˆé—¨ä»»åŠ¡ã€‚
  @js WG.SendCmd("tm (alert_sm)")

// åƒå…»ç²¾ä¸¹å’Œæ½œèƒ½ä¸¹è¯
stopstate
@await 500
[if] {bæœ±æœg}? != null
  [if] {bæœ±æœg#} <= 10
    use {bæœ±æœg}[{bæœ±æœg#}]
  [else]
    use {bæœ±æœg}[10]
  @await 2000
[if] {bæ½œçµæœg}? != null
  [if] {bæ½œçµæœg#} <= 10
    use {bæ½œçµæœg}[{bæ½œçµæœg#}]
  [else]
    use {bæ½œçµæœg}[10]
  @await 2000

// å¼€å§‹ç»Ÿè®¡æ”¶ç›Š
[if] (RecordG) == æ˜¯
  <-recordGains

// è¿½æ•
@toolbar jh
($currentN) = null
[while] (currentN) == null
  @await 500
  @toolbar tasks
  @task è¿½æ€é€ƒçŠ¯ï¼šç›®å‰å®Œæˆ($currentN)/20ä¸ªï¼Œå…±è¿ç»­å®Œæˆ($comboN)ä¸ª|è¿½æ€é€ƒçŠ¯ï¼š($empty)ç›®å‰å®Œæˆ($currentN)/20ä¸ªï¼Œå…±è¿ç»­å®Œæˆ($comboN)ä¸ª
($zbtemp) = (ZByes)
[if] (RCMode) == èŠ‚æ—¥å…è´¹æ¨¡å¼ && (zbtemp) == æ­£å¸¸æ¨¡å¼
  //($zbtemp) = (ZByes)
  ($zbtemp) = å¿«é€Ÿæ‰«è¡
[if] (currentN) < 20 && (zbtemp) == å¿«é€Ÿæ‰«è¡
  @print å¼€å§‹å¿«é€Ÿè¿½æ•
  stopstate
  @tidyBag
  @await 2000
  [while] (:room) != æ‰¬å·åŸ-è¡™é—¨æ­£å…
    $to æ‰¬å·åŸ-è¡™é—¨æ­£å…
    @await 500
  [while] true
    [if] {bæ‰«è¡ç¬¦#}? < 20 || {bæ‰«è¡ç¬¦}? == null
      [if] (RCMode) == æ­£å¸¸æ¨¡å¼
        shop 0 20
    ask3 {ç¨‹è¯å‘}
    @tip æ— æ³•($speed)å®Œæˆ|ç›®å‰å®Œæˆ20/20ä¸ª|å·²ç»å®Œæˆ|ä½ çš„($sdfnum)ç¬¦ä¸å¤Ÿ
    [if] (speed) != null || (sdfnum) != null
      [if] (ZBsx) == è½¬ä¸ºæ­£å¸¸æ¨¡å¼
        ($alert_zb) = è¿½æ•åˆ°è¾¾ä¸Šé™ï¼Œæ— æ³•å¿«é€Ÿæ‰«è¡ï¼Œè½¬ä¸ºæ­£å¸¸æ¨¡å¼ï¼
        ($ZByes) = æ­£å¸¸æ¨¡å¼
      [else if] (ZBsx) == è‡ªåŠ¨æ”¾å¼ƒå†æ‰«è¡
        [if] (comboN) < 200
          ($alert_zb) = è¿½æ•åˆ°è¾¾ä¸Šé™ï¼Œæ— æ³•å¿«é€Ÿæ‰«è¡ï¼Œç¯æ•°ä½äº200ç¯ï¼Œä¸è‡ªåŠ¨æ”¾å¼ƒï¼Œè½¬ä¸ºæ­£å¸¸æ¨¡å¼ï¼
          ($ZByes) = æ­£å¸¸æ¨¡å¼
        [else if] (sdfnum) != null
          ($alert_zb) = ä¹°ä¸èµ·æ‰«è¡ç¬¦ï¼Œæ— æ³•å¿«é€Ÿæ‰«è¡ï¼Œè½¬ä¸ºæ­£å¸¸æ¨¡å¼ï¼
          ($ZByes) = æ­£å¸¸æ¨¡å¼
          ($sdfnum) = null
        [else]
          ($alert_zb) = è¿½æ•åˆ°è¾¾ä¸Šé™ï¼Œæ— æ³•å¿«é€Ÿæ‰«è¡ï¼Œè‡ªåŠ¨æ”¾å¼ƒå†æ‰«è¡ï¼
          ask1 {ç¨‹è¯å‘}
          ask2 {ç¨‹è¯å‘}
          ($speed) = null
          @await 1000
          [continue]
      ($zbtemp) = (ZByes)
    [else]
      ($currentN) = 20
    [break]
  [if] (alert_zb) != null
    @print <ord>(alert_zb)</ord>
    tm (alert_zb)
[if] (currentN) < 20 && (zbtemp) == æ­£å¸¸æ¨¡å¼
  @print å¼€å§‹è‡ªåŠ¨è¿½æ•
  @cd
  stopstate
  (ZBBefore)
  @await 5000
  @tidyBag
  @await 2000
  @js $('#zb_prog').remove()
  @js $(`.state-bar`).before($(`<div id=zb_prog>å¼€å§‹è¿½æ•</div>`).click(() => $('#zb_prog').remove()))
  [while](currentN) < 20
    ($zb) = true
    [if] (:status xuruo) == true && (ZBxuruo) == æ˜¯
        jh fam 9 start;go enter
        $killall
        @until (:combating) == false
    [if] (ZBrenew) == æ˜¯ || (:status xuruo) == true || (type1) != null
      [while] (:room) != æ‰¬å·åŸ-æ­¦åº™
        $to æ‰¬å·åŸ-æ­¦åº™
        @await 500
      @liaoshang
    @until (:status xuruo) == false
    [if](comboN)>=(ZBWaitCD)
      @cd (ZBcdskill)
    [while] (:room) != æ‰¬å·åŸ-è¡™é—¨æ­£å…
      $to æ‰¬å·åŸ-è¡™é—¨æ­£å…
      @await 500
    @await 1000
    ($olddir1) = (dir1)
    ($olddir2) = (dir2)
    //@print (olddir1)
    ($escapee) = null
    [while] (escapee) == null
      ($zbing) = null
      ask1 {ç¨‹è¯å‘}
      @tip è¯´é“ï¼š($escapee)ä½œæ¶å¤šç«¯($info)æœ€è¿‘åœ¨($dir1)-($dir2)å‡ºç°|ä½ ä¸æ˜¯åœ¨($zbing)å—|æ²¡æœ‰åœ¨é€ƒçš„é€ƒçŠ¯|ä½ çš„($party)æ­£åœ¨è¿›æ”»|ä¸è¦æ€¥ï¼Œ($needwait)æ¥
      [if] (needwait) != null
        ($needwait) = null
        @await 30000
        [continue]
      [if] (party) != null
        ($party) = null
        @print <ord>å¸®æˆ˜æœªç»“æŸï¼Œè·å–é€ƒçŠ¯ä¿¡æ¯å¤±è´¥ï¼Œ10ç§’åé‡è¯•ã€‚</ord>
        @await 10000
        [continue]
      [if] (zbing) != null
        ($zbing) = null
        [if] (dir1) == null || (dir2) == null || (escapee) == null
          @await 1000
          @toolbar jh
          @toolbar tasks
          @await 500
          @task è¿½æ€é€ƒçŠ¯ï¼š($escapee)ï¼Œæ®è¯´æœ€è¿‘åœ¨($dir1)-($dir2)å‡ºç°è¿‡ï¼Œä½ è¿˜æœ‰($time)å»å¯»æ‰¾ä»–ï¼Œç›®å‰å®Œæˆ($currentN)/20ä¸ªï¼Œå…±è¿ç»­å®Œæˆ($comboN)ä¸ªã€‚|è¿½æ€é€ƒçŠ¯ï¼šç›®å‰å®Œæˆ($currentN)/20ä¸ªï¼Œå…±è¿ç»­å®Œæˆ($comboN)ä¸ª
      @print <hiy>è¿½æ•ç›®æ ‡ï¼š(escapee) ç›®æ ‡åœ°ç‚¹ï¼š(dir1)-(dir2)</hiy>
    [if](olddir1) != (dir1) && (olddir2) != (dir2)
      ($start_h) = (:hour)
      ($start_m) = (:minute)
    @await 500
    [while] {r(escapee)}? == null
      [if] (tb) == null
        ($tb) = 0
      <---
      [if] (zb) == true
        @cmdDelay 1000
        [if] {r(escapee)}? != null
          ($type1) = null
          ($hunmi) = null
          kill {r(escapee)}?
          @until {(escapee)çš„å°¸ä½“}? != null || {r(escapee)}? ==  null || (:combating) == false || (:living) == false
          @tip ä½ çš„è¿½æ•ä»»åŠ¡($done)äº†ï¼Œç›®å‰å®Œæˆ($currentN)/20ä¸ªï¼Œå·²è¿ç»­å®Œæˆ($comboN)ä¸ªã€‚|ä½ ($type1)æ­»äº†($type2)|ä½ è¦æ”»å‡»è°|è¿½æ•ä»»åŠ¡å¤±è´¥äº†|ä½ åˆ($hunmi)äº†çŸ¥è§‰
          [if] (done) != null
            ($done) = null
            @js $('#zb_prog').html(`<hiy>å½“å‰è¿½æ•ä»»åŠ¡å·²å®Œæˆï¼Œè¿›åº¦ (currentN)/20</hiy>`)
          //[if] (hunmi) != null
            //($hunmi) = null
          [while] (:living)==false
            relive
            @await 500
          [if] (type1) != null && (DieToReset) == å·²å¼€å¯
            [while] (:room) != æ‰¬å·åŸ-è¡™é—¨æ­£å…
              $to æ‰¬å·åŸ-è¡™é—¨æ­£å…
              @await 500
            ask2 {ç¨‹è¯å‘}
          [break]
        [if] (DieToReset) == å·²å…³é—­
          [if] (:hour) == 0 && (start_h) != 0
            ($tb) = 24*60+(:minute)-(start_h)*60-(start_m)
          [else]
            ($tb) = (:hour)*60+(:minute)-(start_h)*60-(start_m)
          @js $('#zb_prog').html(`<hiy>å·²è€—æ—¶(tb)åˆ†é’Ÿ</hiy> <ord>è¿½æ•ç›®æ ‡ï¼š(dir1)-(dir2) (escapee)</ord>`)
          //@print <hiy>å·²è€—æ—¶(tb)åˆ†é’Ÿã€‚</hiy><ord>è¿½æ•ç›®æ ‡ï¼š(escapee) ç›®æ ‡åœ°ç‚¹ï¼š(dir1)-(dir2)</ord>
          [if] (tb) >= 10 || (tb) < 0
            @print <hiy>è¿½æ•è¶…æ—¶ï¼</hiy>
            ($dir1) = null
            ($dir2) = null
            ($tb) = null
            [break]
      --->
      @cmdDelay 1000
      $to (dir1)-(dir2)
      [if] (dir1) == æ­¦å½“æ´¾
        [if](dir2) == æ—é—´å°å¾„
          go south
        jh fam 1 start
        go north
        go south;go west
        go west
        go east;go northup
        go north
        go east
        go west;go west
        go northup
        go northup
        go northup
        go north
        go north
        go north
        go north
        go north
        go north
      [else if] (dir1) == åå±±æ´¾
        jh fam 3 start
        go eastup
        go southup
        jumpdown
        go southup
        go south
        go east
        jh fam 3 start
        go westup
        go north
        go east
        go west;go north
        go east
        go west;go north
        go south[3];go west
        go east;go south
        go southup
        go southup
        look bi;break bi;go enter
        go westup
        go westup
        jumpup
      [else if] (dir1) == å°‘æ—æ´¾
        [if](dir2) == ç«¹æ—
          go north
        jh fam 2 start
        go north
        go west
        go east;go east
        go west;go north
        go northup
        go southdown;go northeast
        go northwest
        go southwest
        go northeast;go north
        go east
        go west;go west
        go east;go north
        go east
        go west;go west
        go east;go north
        go west
        go east;go north
        go north
      [else if] (dir1) == å³¨çœ‰æ´¾
        [if](dir2) == èµ°å»Š
          go north
          go south[2]
          go north;go east[2]
        jh fam 4 start
        go northup
        go east
        go west;go southdown;go west
        go south
        go east
        go east
        go west;go south
        go north;go west;go south
        go north;go west
        go south
        go south
        go north;go north;go west
        go east;go north
        go north
      [else if] (dir1) == é€é¥æ´¾
        [if](dir2) == æ—é—´å°é“
          go west;go north
          go south;go west
          go east;go south
        [else if](dir2) == æœ¨å±‹
          go south[4]
        [else if](dir2) == åœ°ä¸‹çŸ³å®¤
          go up
        jh fam 5 start
        go north
        go north
        jh fam 5 start;go east
        go north
        go south;go south
        go south
        jh fam 5 start;go west
        go south
        jh fam 5 start;go south
        go south
        jh fam 5 start;go down
        go down
      [else if] (dir1) == ä¸å¸®
        [if](dir2) == æš—é“
          go east
          go east[2]
          go east
        jh fam 6 start
        go down
        go east
        go east
        go east
        go up
        go down;go east
        go east
        go up
($zb) = false
//[if] (RCMode) == èŠ‚æ—¥å…è´¹æ¨¡å¼ && (zbtemp) != null
  //($ZByes) = (zbtemp)
@js $('#zb_prog').remove()
@cmdDelay
@await 2000
@tidyBag
@await 2000

// æ­¦é“å¡”
($currentN) = null
[if] (WudaoMode) != åªæ‰“å¡”ä¸»
//[if] (WudaoMode) == æ­£å¸¸æ¨¡å¼ || (WudaoMode) == å¿«é€Ÿæ¨¡å¼  || (RCMode) == èŠ‚æ—¥å…è´¹æ¨¡å¼
  @toolbar jh
  @toolbar tasks
  @task æ­¦é“å¡”($reset)é‡ç½®ï¼Œè¿›åº¦($currentN)/($finalN)ï¼Œ|æ­¦é“å¡”($reset)é‡ç½®ï¼Œè¿›åº¦($currentN)/($finalN)ï¼Œ
  [if] (reset) == å·² && (currentN) != null && (currentN) == (finalN) && (finalN) != 0
    @print <hiy>å½“æ—¥æ­¦é“å¡”å·²å®Œæˆã€‚</hiy>
  [else]
    stopstate
    @cd
    @print å¼€å§‹è‡ªåŠ¨æ­¦é“å¡”
    @tidyBag
    @await 2000
    (WudaoBefore)
    @await 5000
    @renew
    [if] (WudaoMode) == å¿«é€Ÿæ¨¡å¼
      @cmdDelay 500
    jh fam 9 start
    @toolbar jh
    @toolbar tasks
    @task æ­¦é“å¡”å¯ä»¥é‡ç½®ï¼Œè¿›åº¦($currentN)/($finalN)ï¼Œ|æ­¦é“å¡”å·²é‡ç½®ï¼Œè¿›åº¦($currentN)/($finalN)ï¼Œ
    @print å½“å‰æ­¦é“å¡”è¿›åº¦ï¼š(currentN)/(finalN)
    @await 2000
    [if] (currentN) == (finalN)
      ask1 {rå®ˆé—¨äºº}
      @tip ä»å¤´å¼€å§‹æŒ‘æˆ˜|å·²ç»é‡ç½®
      @await 2000
    [while] (wdlevel) == null
      jh fam 9 start
      @await 500
      @tip ä½ ç›®å‰å¯ä»¥ç›´æ¥å»æŒ‘æˆ˜ç¬¬($wdlevel)å±‚
    @print å¼€å§‹æŒ‘æˆ˜ç¬¬(wdlevel)å±‚
    [if] (RCMode) == æ­£å¸¸æ¨¡å¼
      go enter
    [while] (RCMode) == æ­£å¸¸æ¨¡å¼
      [if] (:room) == æ­¦é“å¡”-ç¬¬ä¸€ç™¾å±‚ || (:room) == æ­¦é“å¡”-å¡”é¡¶
        [break]
      [if] (WudaoMode) == æ­£å¸¸æ¨¡å¼
        [if] (wdlevel) >= (WudaoManualMaxLevel)
          [break]
        [if] (:hpPer) < 0.7 || (:mpPer) < 0.3
          @renew
          jh fam 9 start;go enter
        [if] (wdlevel) >= (WudaoWaitCDLevel)
          @cd (WudaoWaitCDExp)
      [else if] (WudaoMode) == å¿«é€Ÿæ¨¡å¼
        [(wdfail) == null]($wdfail) = 0
        [if] (:mpPer) <= 0.2 || (wdfail) > 3
          [if] (WudaoRenew) == null
            ($WudaoRenew) = å¤©åœ°è¯€
          [if] (WudaoRenew) != æ­¦åº™æ¢å¤
            [if] (WudaoRenew) == å¤©åœ°è¯€
              ($wdOriginal)=(:kf_nei)
              enable force changshengjue
              ($renewSkill) = force.zhen
              [(:kf_nei) != changshengjue]($wdRenewSkill)=false
            [else if] (WudaoRenew) == é€†å¤©é“
              ($wdOriginal)=(:kf_nei)
              enable force nitiandao
              ($renewSkill) = force.nian
              [(:kf_nei) != nitiandao]($wdRenewSkill)=false
            [else if] (WudaoRenew) == å¤§é“æ— æ
              ($wdOriginal)=(:kf_zhao)
              enable parry taijishengong4
              ($renewSkill) = parry.da
              [(:kf_zhao) != taijishengong4]($wdRenewSkill)=false
            [if] (wdRenewSkill)=false
              [if] (wdOriginal) != null
                [(WudaoRenew) == å¤©åœ°è¯€ || (WudaoRenew) == é€†å¤©é“]enable force (wdOriginal)
                [(WudaoRenew) == å¤§é“æ— æ]enable parry (wdOriginal)
              @print <hiy>æ— æ³•ä½¿ç”¨(WudaoRenew)ï¼Œæ”¹å›æ­¦åº™æ¢å¤æ¨¡å¼ã€‚</hiy>
              ($WudaoRenew) = æ­¦åº™æ¢å¤
            [else]
              @cd (renewSkill)
              @perform (renewSkill)
              @tip ä½ çš„($less)ä¸å¤Ÿï¼Œæ— æ³•ä½¿ç”¨|è½¬ç¬é—´é‡è·æ–°ç”Ÿ
              [if] (wdOriginal) != null
                [(WudaoRenew) == å¤©åœ°è¯€ || (WudaoRenew) == é€†å¤©é“]enable force (wdOriginal)
                [(WudaoRenew) == å¤§é“æ— æ]enable parry (wdOriginal)
              [if] (less) != null
                ($less) = null
                [while] (:room) != æ‰¬å·åŸ-æ­¦åº™
                  $to æ‰¬å·åŸ-æ­¦åº™
                  @await 500
                @dazuo
                jh fam 9 start;go enter
          [if] (WudaoRenew) == æ­¦åº™æ¢å¤
            [while] (:room) != æ‰¬å·åŸ-æ­¦åº™
              $to æ‰¬å·åŸ-æ­¦åº™
              @await 500
            @dazuo
            jh fam 9 start;go enter
          [if] (wdfail) > 3
            ($wdfail) = 0
          @await 2000
        //stopstate
        [if] (:hpPer) <= 0.01
          @js var jy='(:room)'.indexOf('ç¬¬ä¸ƒå');if(jy!=-1){WG.SendCmd('liaoshang;$wait 10000;stopstate')}
          @await 100
          @until (:state) != ç–—ä¼¤
      kill {ræ­¦é“å¡”å®ˆæŠ¤è€…}?
      [if] (WudaoMode) == æ­£å¸¸æ¨¡å¼
        @await 500
      @until (:combating) == false && (:free) == true && (:status faint) == false && (:status miss) == false
      [if] {ræ­¦é“å¡”å®ˆæŠ¤è€…}? != null
        [(WudaoMode) == å¿«é€Ÿæ¨¡å¼]($wdfail) = (wdfail) + 1
        [continue]
      [else]
        [(WudaoMode) == å¿«é€Ÿæ¨¡å¼]($wdfail) = 0
        ($wdlevel) = (wdlevel) + 1
        go up
    [if] (WudaoMode) == æ­£å¸¸æ¨¡å¼ || (RCMode) == èŠ‚æ—¥å…è´¹æ¨¡å¼
      ($num)=0
      jh fam 9 start
      ask2 {rå®ˆé—¨äºº}
      @tip ç”¨ä¸ç€å¿«é€ŸæŒ‘æˆ˜äº†|ä¸ç”¨å¿«é€ŸæŒ‘æˆ˜|å¿«é€ŸæŒ‘æˆ˜éœ€è¦($num)å¼ æ‰«è¡ç¬¦
      [if] (num) > 0 && (RCMode) != èŠ‚æ—¥å…è´¹æ¨¡å¼
        [if] {bæ‰«è¡ç¬¦#}? < (num) || {bæ‰«è¡ç¬¦}? == null
          shop 0 (num)
      ask2 {rå®ˆé—¨äºº};ask3 {rå®ˆé—¨äºº}
      @tip ä½ çš„æ‰«è¡ç¬¦ä¸å¤Ÿ|æŒ‘æˆ˜å®Œæˆ|ç”¨ä¸ç€å¿«é€ŸæŒ‘æˆ˜äº†|ä¸ç”¨å¿«é€ŸæŒ‘æˆ˜
    @cmdDelay
    @await 2000
    stopstate
    @tidyBag
    //@liaoshang
[else if] (WudaoMode) == åªæ‰“å¡”ä¸»
  @print <hiy>å·²è®¾ç½®åªæ‰“å¡”ä¸»ï¼Œè·³è¿‡æ­¦é“å¡”ã€‚</hiy>
  tm å·²è®¾ç½®åªæ‰“å¡”ä¸»ï¼Œè·³è¿‡æ­¦é“å¡”ã€‚

// å‰¯æœ¬
[if] (FBWay) == è·³è¿‡å‰¯æœ¬
  ($alert_fb) = è·³è¿‡å‰¯æœ¬éƒ¨åˆ†ï¼Œè¯·è‡ªå·±æ‰‹åŠ¨å®Œæˆæƒ³è¦çš„å‰¯æœ¬ã€‚
[else]
  stopstate
  @toolbar jh
  @toolbar tasks
  @task ç²¾åŠ›æ¶ˆè€—ï¼š($tag2)>($jl_com)/200
  [if] (FBnum) == null || (FBnum) < 1
    ($FBnum) = 20
  [if] (jl_com) < 200
    @js ($fb_com) = parseInt((jl_com)/10)

  [if] (fb_com) >=(FBnum) || (fb_com) == null
    [if] (fb_com) == null
      ($fb_com) = 20
    @print <hiy>å½“æ—¥å‰¯æœ¬æ¬¡æ•°å·²å®Œæˆ(fb_com)æ¬¡ã€‚</hiy>
  [else]
    ($fb_num) = (FBnum) - (fb_com)
    @js ($fbName) = "(FBName)".replace(/\(|\)/g,"")
    ($fbdata) = "è´¢ä¸»å®¶ç®€å•":"cr yz/cuifu/caizhu 0","è´¢ä¸»å®¶å›°éš¾":"cr yz/cuifu/caizhu 1","ä¸½æ˜¥é™¢":"cr yz/lcy/dating 0","æµæ°“å··":"cr yz/lmw/xiangzi1 0","å…µè¥":"cr yz/by/damen 0","åº„åºœ":"cr bj/zhuang/xiaolu 0","é³Œæ‹œåºœ":"cr bj/ao/damen 0","å¤©åœ°ä¼š":"cr bj/tdh/hct 0","ç¥é¾™æ•™":"cr bj/shenlong/haitan 0","å…³å¤–":"cr bj/guanwai/damen 0","æ¸©åºœ":"cr cd/wen/damen 0","äº”æ¯’æ•™":"cr cd/wudu/damen 0","æ’å±±":"cr wuyue/hengshan/daziling 0","é’åŸå±±":"cr wuyue/qingcheng/shanlu 0","è¡¡å±±":"cr wuyue/henshan/hengyang 0","æ³°å±±":"cr wuyue/taishan/daizong 0","åµ©å±±":"cr wuyue/songshan/taishi 0","äº‘æ¢¦æ²¼æ³½":"cr cd/yunmeng/senlin 0","æ¡ƒèŠ±å²›ç®€å•":"cr taohua/haitan 0","æ¡ƒèŠ±å²›å›°éš¾":"cr taohua/haitan 1","ç™½é©¼å±±":"cr baituo/damen 0","æ˜Ÿå®¿æµ·":"cr xingxiu/xxh6 0","å†°ç«å²›ç®€å•":"cr mj/bhd/haibian 1","å†°ç«å²›å›°éš¾":"cr mj/bhd/haibian 1","å†°ç«å²›å·æ¸¡":"cr mj/bhd/haibian 1","ç§»èŠ±å®«ç®€å•":"cr huashan/yihua/shandao 0","ç§»èŠ±å®«å›°éš¾":"cr huashan/yihua/shandao 1","ç§»èŠ±å®«å·æ¸¡":"cr huashan/yihua/shandao 1","ç‡•å­åç®€å•":"cr murong/anbian 0","ç‡•å­åå›°éš¾":"cr murong/anbian 1","é»‘æœ¨å´–ç®€å•":"cr heimuya/shangu 0","é»‘æœ¨å´–å›°éš¾":"cr heimuya/shangu 1","ç¼¥ç¼ˆå³°å›°éš¾":"cr lingjiu/shanjiao 1","ç¼¥ç¼ˆå³°å·æ¸¡":"cr lingjiu/shanjiao 1","å…‰æ˜é¡¶":"cr mj/shanmen 0","å…‰æ˜é¡¶å·æ¸¡":"cr mj/shanmen 0","å¤©é¾™å¯ºå›°éš¾":"cr tianlong/damen 1","å¤©é¾™å¯ºå·æ¸¡":"cr tianlong/damen 1","è¡€åˆ€é—¨":"cr xuedao/shankou 0","å¤å¢“æ´¾ç®€å•":"cr gumu/gumukou 0","å¤å¢“æ´¾å›°éš¾":"cr gumu/gumukou 1","å¤å¢“æ´¾å›°éš¾å·æ¸¡":"cr gumu/gumukou 1","åå±±è®ºå‰‘":"cr huashan/lunjian/leitaixia 0","ä¾ å®¢å²›":"cr xkd/shimen 0","å‡€å¿µç¦…å®—ç®€å•":"cr chanzong/shanmen 0","å‡€å¿µç¦…å®—å›°éš¾":"cr chanzong/shanmen 1","å‡€å¿µç¦…å®—å›°éš¾å·æ¸¡":"cr chanzong/shanmen 1","æ…ˆèˆªé™æ–‹ç®€å•":"cr cihang/shanmen 0","æ…ˆèˆªé™æ–‹å›°éš¾":"cr cihang/shanmen 1","æ…ˆèˆªé™æ–‹ç®€å•å·æ¸¡":"cr cihang/shanmen 0","æ…ˆèˆªé™æ–‹å›°éš¾å·æ¸¡":"cr cihang/shanmen 1","é˜´é˜³è°·":"cr yyg/ya 0","é˜´é˜³è°·å·æ¸¡":"cr yyg/ya 0","æˆ˜ç¥æ®¿ç®€å•":"cr zsd/damen 0","æˆ˜ç¥æ®¿å›°éš¾":"cr zsd/damen 1","æˆ˜ç¥æ®¿ç®€å•å·æ¸¡":"cr zsd/damen 0","æˆ˜ç¥æ®¿å›°éš¾å·æ¸¡":"cr zsd/damen 1","å¤å®—é—¨é—å€":"cr gmp/shanmen 0"
    @js ($fbcr) = var fb={(fbdata)};fb.(fbName)
    [if] (FBWay) == æ‰«è¡
      //æ‰«è¡æ¨¡å¼
      [if] (FBName) == æµæ°“å··(ç»„é˜Ÿ) || (FBName) == ç¥é¾™æ•™(ç»„é˜Ÿ) || (FBName) == äº”æ¯’æ•™(ç»„é˜Ÿ) || (FBName) == äº‘æ¢¦æ²¼æ³½(ç»„é˜Ÿ) || (FBName) == ç™½é©¼å±±(ç»„é˜Ÿ) || (FBName) == å†°ç«å²›(å·æ¸¡) || (FBName) == ç§»èŠ±å®«(å·æ¸¡) || (FBName) == ç‡•å­å(å·ä¹¦) || (FBName) == ç¼¥ç¼ˆå³°(å·æ¸¡) || (FBName) == å…‰æ˜é¡¶(ç»„é˜Ÿ) || (FBName) == å…‰æ˜é¡¶(å·æ¸¡) || (FBName) == å¤©é¾™å¯º(å·æ¸¡) || (FBName) == å¤å¢“æ´¾(å›°éš¾å·æ¸¡) || (FBName) == å‡€å¿µç¦…å®—(å›°éš¾å·æ¸¡) || (FBName) == æ…ˆèˆªé™æ–‹(ç®€å•å·æ¸¡) || (FBName) == æ…ˆèˆªé™æ–‹(å›°éš¾å·æ¸¡) || (FBName) == é˜´é˜³è°·(å·æ¸¡) || (FBName) == æˆ˜ç¥æ®¿(ç®€å•å·æ¸¡) || (FBName) == æˆ˜ç¥æ®¿(å›°éš¾å·æ¸¡)
        ($alert_fb) = (FBName)æ— æ³•æ‰«è¡ï¼Œè¯·æ”¹ä¸ºè‡ªåŠ¨æ¨¡å¼ï¼
      [else]
        //team out
        @tidyBag
        @await 3000
        [if] {bæ‰«è¡ç¬¦#}? < (fb_num) || {bæ‰«è¡ç¬¦}? == null
          [if] (RCMode) == æ­£å¸¸æ¨¡å¼
            shop 0 (fb_num)
        [if] (FBName) == å¤å®—é—¨é—å€
          jh fam 9 start;go enter
          go up
          ggdl {rç–¯ç™«çš„è€å¤´}
          go north[2]
          go north[2]
          go north[2]
          @await 2000
          look shi
          tiao1 shi;tiao1 shi;tiao2 shi
          jumpdown
          @await 2000
        (fbcr) (fb_num)
        [if] (fb_num) > 1
          @tip æ‰«è¡å®Œæˆ|æ‰«è¡ç¬¦($lack)ç»§ç»­æ‰«è¡|ä½ çš„($jingli)ä¸å¤Ÿ
        [if] (lack) != null
          ($alert_fb) = æ‰«è¡ç¬¦ä¸è¶³ï¼Œæ— æ³•å®Œæˆå¯¹ã€(FBName)ã€‘å‰¯æœ¬çš„(FBnum)æ¬¡æ‰«è¡ï¼
        [else if] (jingli) == ç²¾åŠ›
          ($alert_fb) = ç²¾åŠ›ä¸è¶³ï¼Œæ— æ³•å®Œæˆå¯¹ã€(FBName)ã€‘å‰¯æœ¬çš„(FBnum)æ¬¡æ‰«è¡ï¼
        @tidyBag
        @await 2000
    [else if] (FBWay) == è‡ªåŠ¨
      //è„šæœ¬è‡ªåŠ¨æ¨¡å¼
      stopstate
      (FBBefore)
      @await 5000
      [if] (FBName) == å†°ç«å²›(å·æ¸¡) || (FBName) == ç§»èŠ±å®«(å·æ¸¡) || (FBName) == ç¼¥ç¼ˆå³°(å·æ¸¡) || (FBName) == å…‰æ˜é¡¶(å·æ¸¡) || (FBName) == å¤©é¾™å¯º(å·æ¸¡) || (FBName) == å¤å¢“æ´¾(å›°éš¾å·æ¸¡) || (FBName) == å‡€å¿µç¦…å®—(å›°éš¾å·æ¸¡) || (FBName) == æ…ˆèˆªé™æ–‹(ç®€å•å·æ¸¡) || (FBName) == æ…ˆèˆªé™æ–‹(å›°éš¾å·æ¸¡) || (FBName) == é˜´é˜³è°·(å·æ¸¡) || (FBName) == æˆ˜ç¥æ®¿(ç®€å•å·æ¸¡) || (FBName) == æˆ˜ç¥æ®¿(å›°éš¾å·æ¸¡)
        ($tdnum) = 0
        [while] (tdnum) < (fb_num)
          (fbcr) 0;cr over
          @await 500
          ($tdnum) = (tdnum) + 1
      [else]
        @js ($fbexist) = if(GetDungeonFlow(`(FBName)`)!=null){true}else{false}
        [if] (fbexist) == true
          [if] (FBName) != ç™½é©¼å±±(ç»„é˜Ÿ)
            team out
          [if] (callmode) == null
            ($fb_auto_num) = 0
            [while] (fb_auto_num) < (fb_num)
              stopstate
              [while] (:room) != æ‰¬å·åŸ-æ­¦åº™
                $to æ‰¬å·åŸ-æ­¦åº™
                @await 1000
              @js ManagedPerformerCenter.start(`è‡ªåŠ¨å‰¯æœ¬-(FBName)`, GetDungeonSource("(FBName)").replace(/#.*\n/g,'($_DungeonHpThreshold)=(DungeonHpThreshold)\n($_DungeonWaitSkillCD)=(DungeonWaitSkillCD)\n($_DungeonBagCleanWay)=(DungeonBagCleanWay)\n($_DungeonRecordGains)=å¦\n($_repeat)=(fb_num)\n'))
              @until (:room å‰¯æœ¬åŒºåŸŸ) == true
              @await 3000
              @until (:room å‰¯æœ¬åŒºåŸŸ) == false
              @until (:room) == ä½æˆ¿-ç»ƒåŠŸæˆ¿ || (:room) == ä½æˆ¿-å§å®¤ || (:room) == ä½æˆ¿-é™¢å­ || (:room) == æ‰¬å·åŸ-å¤§é—¨ || (:room) == å¸®ä¼š-ç»ƒåŠŸæˆ¿
              ($fb_auto_num) = (fb_auto_num) + 1
          [else]
            @js ManagedPerformerCenter.start(`è‡ªåŠ¨å‰¯æœ¬-(FBName)`, GetDungeonSource("(FBName)").replace(/#.*\n/g,'($_DungeonHpThreshold)=(DungeonHpThreshold)\n($_DungeonWaitSkillCD)=(DungeonWaitSkillCD)\n($_DungeonBagCleanWay)=(DungeonBagCleanWay)\n($_DungeonRecordGains)=å¦\n($_repeat)=(fb_num)\n'))
            @until (:room) == ä½æˆ¿-ç»ƒåŠŸæˆ¿ || (:room) == ä½æˆ¿-å§å®¤ || (:room) == ä½æˆ¿-é™¢å­ || (:room) == æ‰¬å·åŸ-å¤§é—¨ || (:room) == å¸®ä¼š-ç»ƒåŠŸæˆ¿
        [else]
          ($alert_fb) = (FBName)æ²¡æœ‰è‡ªåŠ¨è„šæœ¬ï¼

// èµŒåœºå…‘æ¢æ®‹é¡µ
[if] (Duihuan) != ä¸å…‘æ¢
  //($dhdata) = "æ— å¿µç¦…åŠŸ":"0_32","é•¿ç”Ÿè¯€":"1_32","æ…ˆèˆªå‰‘å…¸":"1_33","é˜´é˜³ä¹è½¬":"0_34","æˆ˜ç¥å›¾å½•":"0_35","ç¥å™¨ç¢ç‰‡":"1_35"
  //@js ($dhfb) = var dh={(dhdata)};dh.(Duihuan)
  [if] (Duihuan) == æ— å¿µç¦…åŠŸ
    ($dhfb) = 0_32
  [else if] (Duihuan) == é•¿ç”Ÿè¯€
    ($dhfb) = 1_32
  [else if] (Duihuan) == æ…ˆèˆªå‰‘å…¸
    ($dhfb) = 1_33
  [else if] (Duihuan) == é˜´é˜³ä¹è½¬
    ($dhfb) = 0_34
  [else if] (Duihuan) == æˆ˜ç¥å›¾å½•
    ($dhfb) = 0_35
  [else if] (Duihuan) == ç¥å™¨ç¢ç‰‡
    ($dhfb) = 1_35
  [if] (dhfb) != null
    stopstate
    [while] (:room) != æ‰¬å·åŸ-èµŒåœº
      $to æ‰¬å·åŸ-èµŒåœº
      @await 500
    ask3 {ræ˜“ç›´é}?
    duihuan (dhfb)
    @tip ä½ ç›®å‰å…±å®Œæˆ($dhtotal)æ¬¡
    @await 200
    @js ($dhcy) = $(".content-message").find(".item-commands").last().children("span:contains('(Duihuan)')").attr("cmd")
    @js ($dhpl) = $(".content-message").find(".item-commands").last().children("span:contains('(Duihuan)')").text().match(/[0-9]+/)
    [if] (dhcy) != null && (dhpl) != null
      @js ($dhnum) = parseInt((dhtotal)/(dhpl))
    [if] (dhnum) > 0 && (dhnum) != null
      ($num) = 0
      [while] (num) < (dhnum)
        (dhcy)
        @await 500
        ($num) = (num) + 1
      ($dhinfo) = å½“å‰å®Œæˆæ¬¡æ•°(dhtotal)ï¼Œæ¯(dhpl)æ¬¡å…‘æ¢1ä»½(Duihuan)ï¼Œå…±è®¡å…‘æ¢(num)é¡µã€‚
    [else]
      ($dhinfo) = å½“å‰å®Œæˆæ¬¡æ•°(dhtotal)ï¼Œæ— æ³•å…‘æ¢(Duihuan)ã€‚
    [if] (dhinfo) != null
      @print <hic>(dhinfo)</hic>
      tm (dhinfo)

[if] (GmpSD) == æ‰«è¡
  @await 3000
  stopstate
  jh fam 9 start;go enter
  go up
  ggdl {rç–¯ç™«çš„è€å¤´}
  go north[2]
  go north[2]
  go north[2]
  @await 2000
  look shi
  tiao1 shi;tiao1 shi;tiao2 shi
  jumpdown
  [if] (GmpSDnum) == null
    ($GmpSDnum) = 10
  [if] {bæ‰«è¡ç¬¦#}? < (GmpSDnum) || {bæ‰«è¡ç¬¦}? == null
    [if] (RCMode) == æ­£å¸¸æ¨¡å¼
      shop 0 (GmpSDnum)
  cr gmp/shanmen 0 (GmpSDnum)
  [if] (GmpSDnum) > 1
    @tip å¤å®—é—¨é—å€æ‰«è¡å®Œæˆ|æ‰«è¡ç¬¦($gmplack)ç»§ç»­æ‰«è¡|ä½ çš„($gmpjingli)ä¸å¤Ÿ
  [if] (gmplack) != null
    ($alert_gmp) = æ‰«è¡ç¬¦ä¸è¶³ï¼Œæ— æ³•å®Œæˆå¯¹ã€å¤å®—é—¨é—å€ã€‘å‰¯æœ¬çš„(GmpSDnum)æ¬¡æ‰«è¡ï¼
  [else if] (gmpjingli) != null
    ($alert_gmp) = ç²¾åŠ›ä¸è¶³ï¼Œæ— æ³•å®Œæˆå¯¹ã€å¤å®—é—¨é—å€ã€‘å‰¯æœ¬çš„(GmpSDnum)æ¬¡æ‰«è¡ï¼

// ä½¿ç”¨ç‰ç®€
@await 1000
[while] {bç‰ç®€p%}? != null
  use {bç‰ç®€p%}?
  @tip æ‰¾åˆ°å®—é—¨ä¼ æ‰¿çº¿ç´¢|æ²¡æœ‰($yujian)ååº”
  [if] (yujian) != null
    [break]
  @await 500

// å½“é“ºè´­ä¹°
stopstate
$tnbuy
@await 3000
@tidyBag

// è¯·å®‰
greet master
[if] (RC_qingan) == è¯·å®‰
  @await 2000
  @js WG.oneKeyQA()
  @await 5000
[else]
  [if] (:grade) != æ­¦ç¥ && (:grade) != æˆ˜ç¥ && (:grade) != åˆ€çš‡ && (:grade) != å‰‘ç¥ && (:grade) != å…µä¸»
    ($alert_qa) = æ ¹æ®è®¾ç½®ï¼Œå·²è·³è¿‡è¯·å®‰ã€‚

// é¢†å–ç­¾åˆ°å¥–åŠ±
stopstate
taskover signin;taskover zz1;taskover zz2

// æ£€æŸ¥ç²¾åŠ›
[(:grade) == ç™¾å§“]($jlUp) = 1000
[(:grade) == æ­¦å£«]($jlUp) = 2000
[(:grade) == æ­¦å¸ˆ]($jlUp) = 3000
[(:grade) == å®—å¸ˆ]($jlUp) = 5000
[(:grade) == æ­¦åœ£]($jlUp) = 7000
[(:grade) == æ­¦å¸]($jlUp) = 10000
[(:grade) == æ­¦ç¥ || (:grade) == å‰‘ç¥ || (:grade) == åˆ€ç¥ ||(:grade) == å…µä¸» || (:grade) == æˆ˜ç¥]($jlUp) = 15000
[if] (:grade) == ç™¾å§“ || (:grade) == æ­¦å£« || (:grade) == æ­¦å¸ˆ
  ($jlOver) = 300
[else if] (:grade) == å®—å¸ˆ || (:grade) == æ­¦åœ£
  ($jlOver) = 500
[else]
  ($jlOver) = 1000

@toolbar jh
@toolbar score
@await 1000
score
@await 500
[if] (jlUp) != null && (jlOver) != null && (jlUp) >= (:energy)
  ($jlDif) = (jlUp) - (:energy)
[if] (jlDif) <= (jlOver) && (jlDif) != null
  ($alert_jl) = âš¡ï¸ å½“å‰ç²¾åŠ› (:energy)/(jlUp)ï¼Œå³å°†æº¢å‡ºä¸å†å¢åŠ ï¼Œè¯·åŠæ—¶ä½¿ç”¨ã€‚
@toolbar jh

// ç»“æŸæ”¶ç›Šç»Ÿè®¡
[if] (RecordG) == æ˜¯
  recordGains->
@recoverSSAuto

// æ—¥å¸¸ç»“æŸå
(RCAfter_action)
@print <hiy>è‡ªåŠ¨æ—¥å¸¸ç»“æŸï¼</hiy>
($bobao) = (:name)ï¼Œè‡ªåŠ¨æ—¥å¸¸ç»“æŸï¼
($report) = æ—¥å¸¸æŠ¥å‘Š
[if] (alert_sm) != null
  @print <ord>(alert_sm)</ord>
  ($bobao) = (bobao)(alert_sm)
  ($report) = (report)âš ï¸(alert_sm)
[if] (alert_fb) != null
  @print <ord>(alert_fb)</ord>
  ($bobao) = (bobao)(alert_fb)
  ($report) = (report)âš ï¸(alert_fb)
[if] (alert_gmp) != null
  @print <ord>(alert_gmp)</ord>
  ($bobao) = (bobao)(alert_gmp)
  ($report) = (report)âš ï¸(alert_gmp)
[if] (alert_qa) != null
  @print <ord>(alert_qa)</ord>
  ($bobao) = (bobao)(alert_qa)
  ($report) = (report)âš ï¸(alert_qa)
@js $('#report_prog').remove()
[if] (report) != æ—¥å¸¸æŠ¥å‘Š
  @js $(`.state-bar`).before($(`<div id=report_prog><ord>(report)</ord></div>`).click(() => $('#report_prog').remove()))
[if] (TTSover) == æ’­æŠ¥
  $tts (bobao)
[if] (alert_jl) != null
  @js $('#report_jl').remove()
  @js $(`.state-bar`).before($(`<div id=report_jl><ord>(alert_jl)</ord></div>`).click(() => $('#report_jl').remove()))
  //@await 1000
  //@js alert("(alert_jl)")