//~silent
//ç™½ä¸‰ä¸‰
[if] (arg0) != null
  ($bossName) = (arg0)
[if] (arg1) != null
  ($bossPlace) = (arg1)

($localVer) = 2021120602
($changeLog) = ğŸ†• ä¼˜åŒ–è´¢ä¸»å®¶ã€ç¼¥ç¼ˆå³°åˆ¤æ–­ï¼›ä¼˜åŒ–é€šçŸ¥åŠŸèƒ½ã€‚â­ï¸ è‡ªåŠ¨å¯»è·¯æ‰“Bossï¼Œå¯è®¾ç½®é€šçŸ¥æ–¹å¼ã€‚
($flowName) = è‡ªåŠ¨çº¢boss
($flowCode) = zdhboss
($flowPath) = æ ¹æ–‡ä»¶å¤¹
($flowFinder) = æ ¹æ–‡ä»¶å¤¹
//($repourl) = https://cdn.jsdelivr.net/gh/mapleobserver/wsmud-script
($repourl) = http://wsmud-cdn.if404.com
@js ($version) = $.ajax({type: "GET", url: "(repourl)/version.txt", async: false, cache: false}).responseText;
[if] (version) != null
  @js ($remoteVer) = var v = (version);v.(flowCode)
[if] (localVer) < (remoteVer) && (remoteVer) != null
  [if] (UPnum) == null
    ($UPnum) = 0
  [if] (UPnum) < 2
    [if] (UPnum) == 1
      @print æœªè·å–åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤‡ç”¨åœ°å€å†æ¬¡å°è¯•...
      ($repourl) = http://wsmud-cdn.if404.com
    ($UPnum) = (UPnum) + 1
    [if] (flowPath) != æ ¹æ–‡ä»¶å¤¹ && (flowPath) != null
      ($flowSource) = (repourl)/(flowPath)/(flowName).flow.txt
    [else]
      ($flowSource) = (repourl)/(flowName).flow.txt
    [if] (flowFinder) == null
      ($flowFinder) = æ ¹æ–‡ä»¶å¤¹
    @js WG.SendCmd("tm å½“å‰(flowName)ç‰ˆæœ¬ã€(localVer)ã€‘ï¼Œå°†å¼€å§‹è‡ªåŠ¨æ›´æ–°è‡³æœ€æ–°ã€(remoteVer)ã€‘ã€‚")
    ($f_ss)={"name":"(flowName)","source":"(flowSource)","finder":"(flowFinder)"}
    @js var time = Date.parse( new Date());var f=(f_ss);var n=f["name"];var s=f["source"];var fd=f["finder"];WorkflowConfig.removeWorkflow({"name":n,"type":"flow","finder":fd});$.get(s,{stamp:time},function(data,status){WorkflowConfig.createWorkflow(n,data,fd);});
    @wait 2000
  [else]
    ($UPnum) = null
  [if] (UPnum) != null
    @js WG.zmlfire({"name":"é‡å¯æµç¨‹","zmlRun":"//~silent\n@call è‡ªåŠ¨çº¢boss (bossName),(bossPlace)","zmlShow":0,"zmlType":"1"})
    [exit]
[else]
  ($UPnum) = null


[if] (bossName) == null || (bossPlace) == null
  #select ($bossName) = <ord>æ­¤å¤„ä¸»è¦ç”¨äºè®¾ç½®å‚æ•°ï¼Œå¹³å¸¸ä½¿ç”¨è¯·é€šè¿‡ã€çº¢bossæŠ¥å‘Šã€‘è§¦å‘</ord><br/>&nbsp*&nbspBossåå­—,æµªç¿»äº‘|åºæ–‘|çƒ›ä¹é˜´|èš©å°¤|å¤©åƒ§,(bossName)
  #select ($bossPlace) = å‰¯æœ¬åç§°,æ ‘æ—|è´¢ä¸»å®¶|æµæ°“å··|ä¸½æ˜¥é™¢|ç¥é¾™æ•™|æ¸©åºœ|äº”æ¯’æ•™|æ’å±±|é’åŸå±±|è¡¡å±±|æ³°å±±|åµ©å±±|äº‘æ¢¦æ²¼æ³½|ç™½é©¼å±±|æ˜Ÿå®¿æµ·|å†°ç«å²›|ç§»èŠ±å®«|ç‡•å­å|é»‘æœ¨å´–|ç¼¥ç¼ˆå³°|å…‰æ˜é¡¶|å¤©é¾™å¯º|è¡€åˆ€é—¨|å¤å¢“æ´¾|åå±±è®ºå‰‘,(bossPlace)
  [(BossTanlong) == null]($BossTanlong) = å‰‘å¿ƒ+èåˆæ¢é¾™
  #select ($BossTanlong) = æ‰¾åˆ°Bossåæ˜¯å¦å«æ€,åŸåœ°ç­‰å¾…é€šçŸ¥ç©å®¶|ç›´æ¥å«æ€|è‡ªå®šä¹‰å‘½ä»¤|å‰‘å¿ƒ+èåˆæ¢é¾™|å‰‘å¿ƒ+æ­£å¸¸æ¢é¾™|èåˆæ¢é¾™|æ­£å¸¸æ¢é¾™,(BossTanlong)
  #input ($BossCustomKill) = å«æ€Bossè‡ªå®šä¹‰å‘½ä»¤ï¼ˆä¸Šä¸ªé€‰é¡¹éœ€é€‰è‡ªå®šä¹‰å‘½ä»¤ï¼Œå¤šä¸ªå‘½ä»¤ç”¨è‹±æ–‡åˆ†å·éš”å¼€ï¼Œä¸è¦ç”¨@å¼€å¤´çš„å‘½ä»¤ï¼‰,(BossCustomKill)
  [(BossBefore) == null]($BossBefore) = $usezml æ­£å¸¸
  #input ($BossBefore) = è¿›å‰¯æœ¬å‰åæ­£å¸¸è£…å¤‡æŠ€èƒ½è§¦å‘,(BossBefore)
  [(BossSkill) == null]($BossSkill) = enable force none;$usezml è¡€å‰‘
  #input ($BossSkill) = æ€Bosså‰æ¢è£…å¤‡æŠ€èƒ½è§¦å‘(å»ºè®®ç”¨è‡ªå‘½ä»¤è°ƒç”¨),(BossSkill)
  [(BossWarning) == null]($BossWarning) = è¯­éŸ³æ’­æŠ¥
  #select ($BossWarning) = é­é‡é—®é¢˜æ—¶å‘å‡ºè­¦æŠ¥(æ‰¾åˆ°æˆ–æ‰¾ä¸åˆ°Bossã€è¢«æ‰“æ­»2æ¬¡ç­‰),ä¸æç¤º|å¼¹çª—æé†’|æç¤ºéŸ³|è¯­éŸ³æ’­æŠ¥|è¿œç¨‹é€šçŸ¥,(BossWarning)
  #config

[if] (bossName) == null || (bossPlace) == null
  @print æ— Bossæ•°æ®ï¼Œæµç¨‹ç»ˆæ­¢ã€‚
  [exit]
[if] (bossPlace) == ç§»èŠ±å®« || (bossPlace) == é»‘æœ¨å´–
  [if] {bç«æŠ˜å­}? == null
    @print <hiy>âš ï¸ (bossPlace)æ‰€éœ€ç«æŠ˜å­ä¸è¶³ï¼Œè¯·å…ˆè·å–å†è¿›å…¥ã€‚</hiy>
    [exit]
[if] (bossPlace) == é»‘æœ¨å´–
  [if] {bé’é¾™å ‚ä»¤ç‰Œ}? == null || {bç™½è™å ‚ä»¤ç‰Œ}? == null || {bé£é›·å ‚ä»¤ç‰Œ}? == null
    @print <hiy>âš ï¸ é»‘æœ¨å´–æ‰€éœ€ç‰©å“ä¸è¶³ï¼Œè¯·å…ˆæ‰«è¡è·å–æ‰è¿›å»ã€‚</hiy>
    [exit]

($BossInfo)=notime
@cmdDelay 500
($fbArrayPath) = "æ ‘æ—":"'cr yz/lw/shangu 0 0','go west','go west','go west'","è´¢ä¸»å®¶":"'cr yz/cuifu/caizhu 1 0','go north','go north','look men;open men;go east','go west;go west'","æµæ°“å··":"'cr yz/lmw/xiangzi1 0 0','go east','go north','go south;go east','go east'","ä¸½æ˜¥é™¢":"'cr yz/lcy/dating 0 0','go up','go east','go west;go west','look tai;tui tai;go enter'","ç¥é¾™æ•™":"'cr bj/shenlong/haitan 0 0','go north','look bush;kan bush;go north','go north','go north','go south;go east','go east','go north','go north','go north'","æ¸©åºœ":"'cr cd/wen/damen 0 0','look tree;climb tree','go north','go northeast','go east','go west;go north','go east','go west;go northwest','go southwest','go west','go east;go south','go west','go east;go north;go northeast;go north','look zhuang;tiao zhuang;tiao zhuang','go north'","äº”æ¯’æ•™":"'cr cd/wudu/damen 0 0','go east','go south','go west','go east;go east','go west;go south','go north;go north','go east','go east','go east','go north','go west'","æ’å±±":"'cr wuyue/hengshan/daziling 0 0','go northup','go northwest','go northup','go southdown;go northwest','go northup','go northup','go north','go north','go south;go west','go north','go south;go east;go east','go north'","é’åŸå±±":"'cr wuyue/qingcheng/shanlu 0 0','go westup','go north','go northup','go eastup','go northup','go north','go north','go north','go north','go south;go east','go north'","è¡¡å±±":"'cr wuyue/henshan/hengyang 0 0','go west','go west','go west','go east;go east;go north','go north','go north','go west','go east;go east','go west;go south;go south;go south;go east','go east','go southeast','go south','go east','go south','go south'","æ³°å±±":"'cr wuyue/taishan/daizong 0 0','go northup','go northup','go northup','go northup','go northup','go northup','go northup','go northup','go northup'","åµ©å±±":"'cr wuyue/songshan/taishi 0 0','go north','go north','go northup','go northeast','go northup','go northup','go westup','go westup','go eastdown;go eastdown','go northup','go north','go north','go north','go north','go south;go west','go east;go east'","äº‘æ¢¦æ²¼æ³½":"'cr cd/yunmeng/senlin 0 0','go east','go north','go east','go north','look wei;jump wei','go west;go south;go west;go north','look lu;kan lu;go north','go north','go north','go north'","ç™½é©¼å±±":"'cr baituo/damen 0 0','go north','go north','go north','go north','go south;go south;go south;go west','go south','go north;go west','go west','go north','go north','go north'","æ˜Ÿå®¿æµ·":"'cr xingxiu/xxh6 0 0','go northeast','go north','go northwest','go southwest','go south','go north;go northeast','go north'","å†°ç«å²›":"'cr mj/bhd/haibian 1 0','go west','go west','go west','go west','go east;go east;go east;go east;go north','go north','go north','go north','go out;go west','look dong;zuan dong'","ç§»èŠ±å®«":"'cr huashan/yihua/shandao 1 0','go south','go south','go south','go south','go southeast','go northwest;go southwest','go southeast','go down','fire;go west','go west','go west','go north','go north'","ç‡•å­å":"'cr murong/anbian 1 0','go east','go east','go east','go east','go east','go east','go west;go north','go east','go west','look pai;bai pai;bai pai;bai pai;go north','go south;go south;go west;go west;go south','go east','go south','go south','go east'","é»‘æœ¨å´–":"'cr heimuya/shangu 0 0','go north','go north','go north','go south;go south;go south;go south','go south','go south','go north;go north;go north;go east','go north','go north','go north','go south;go south;go south;go south','go north;go east','push xiazi;go enter','go up','push xiazi;go enter','go up','push xiazi;go enter','go up','go east','go east','circle wan;go down','fire;push;go south','go east'","ç¼¥ç¼ˆå³°":"'cr lingjiu/shanjiao 1 0','go northup','go northup','go northup','zou tiesuo','go northup','go north','go north','go north','go west','go east;go east','go west;go north','go west','go east;go east','go west;go north','go north'","å…‰æ˜é¡¶":"'cr mj/shanmen 0 0','go north','go west','go northwest','go north','go east','go east','go east','go west;go west;go west;go north','go north','go north','go east','go east','go west;go north','go east','go east;go west','go west','go south','go east;go north','go north','go north','go west','go north','go north','go south;go west'","å¤©é¾™å¯º":"'cr tianlong/damen 1 0','go south','go south','go south','go north;go southwest','go south','go east','go south','go north;go east','go north'","è¡€åˆ€é—¨":"'cr xuedao/shankou 0 0','go south','go east','go west;go south','go eastup','go enter'","å¤å¢“æ´¾":"'cr gumu/gumukou 1 0','go enter','go east','go north','go south;go east'","åå±±è®ºå‰‘":"'cr huashan/lunjian/leitaixia 0 0','go up','jump bi','go down','go north','go south;go south','go north;go west','go east;go east'"
@js ($fbPath) = var fba={(fbArrayPath)};fba.(bossPlace)
@js ($len) = [(fbPath)].length
stopstate
team out
[if] (BossBefore) != null
  (BossBefore)
  @await 4000
@print <hiy>âœˆï¸ å¼€å§‹è‡ªåŠ¨å¯»è·¯</hiy>
($num) = 0
[while] (num) < (len)
  @js ($path) = [(fbPath)][(num)]
  ($pathNow) = (:path)
  ($renum) = 0
  [while] (:path) == (pathNow) && (:room ç§»èŠ±å®«-èŠ±å¾„,è´¢ä¸»å®¶-åé™¢) == false
    [if] (renum) > 2
      [if] (:room ç¼¥ç¼ˆå³°-ç™¾ä¸ˆæ¶§) == true
        ($result) = piaomiao
        ($logResult) = ã€Bosså¯»è¸ªã€‘(:name)ï¼šèº²é—ªä¸è¶³ä¸€ä¸‡ï¼Œæ— æ³•é€šè¿‡(bossPlace)ã€‚
        ($num) = 99
        [break]
      $killall
      @until (:combating) == false
      @await 3000
      ($renum) = 0
      [continue]
    (path)
    [if] (:combating) == true
      @until (:combating) == false
      @await 3000
    @await 500
    ($renum) = (renum) + 1
  [if] {r(bossName)}? != null
    @print ğŸ¯ å·²æ‰¾åˆ° => <ord>(bossName)</ord>
    ($result) = get
    [break]
  [while] (:room ç§»èŠ±å®«-èŠ±å¾„) == true && (yihua) != true
    go south
    @await 500
    [if] (:room ç§»èŠ±å®«-å±±é“) == true
      go south
      @await 500
      [continue]
    [if] (:room ç§»èŠ±å®«-èŠ±å¾„) == false
      ($yihua) = true
      [if] {r(bossName)}? != null
        @print ğŸ¯ å·²æ‰¾åˆ° => <ord>(bossName)</ord>
        ($result) = get
        ($num) = 99
        [break]
  [if] (:room ç§»èŠ±å®«-é‚€æœˆå®«) == true && (flower) == null
    look hua
    @tip ä½ æ•°äº†ä¸‹å¤§æ¦‚æœ‰($flower)æœµèŠ±
  [else if] (:room ç§»èŠ±å®«-å®«ä¸»å§å®¤) == true
    look bed;pushstart bed
    pushleft bed[(flower)]
    @await 1000
    pushright bed[8]
    @await 1000
  [else if] (:room ç§»èŠ±å®«-æ¡‚èŠ±å»Š,ç§»èŠ±å®«-ç«ç‘°å»Š,é»‘æœ¨å´–-å¤§å…,é»‘æœ¨å´–-é’é¾™å ‚å¤§å…) == true
    $killall
    @until (:combating) == false
    @await 3000
  [else if] (:room è´¢ä¸»å®¶-åé™¢) == true
    $killall
    @until (:combating) == false
    @await 3000
    [if] {bä¸œå¢é’¥åŒ™w}? == null
      @print <hiy>æ²¡é’¥åŒ™</hiy>
      go west
      ($num) = 99
    [else]
      look men;open men;go east
      ($num) = (num) + 1
    [if] {r(bossName)}? != null
      @print ğŸ¯ å·²æ‰¾åˆ° => <ord>(bossName)</ord>
      ($result) = get
      ($num) = 99
      [break]
  @until (:combating) == false
  @await 500
  ($num) = (num) + 1
// æ‰¾ä¸åˆ°Boss
[if] (num) >= (len) && {r(bossName)}? == null && (logResult) != null
  ($result) = miss
  ($logResult) = ã€Bosså¯»è¸ªã€‘(:name)ï¼šåœ¨(bossPlace)æ‰¾ä¸åˆ°(bossName)ã€‚
// åŸåœ°ç­‰å¾…é€šçŸ¥ç©å®¶
[if] (BossTanlong) == åŸåœ°ç­‰å¾…é€šçŸ¥ç©å®¶ && (result) == get
  ($result) = wait
  ($logResult) = ã€Bosså¯»è¸ªã€‘(:name)ï¼šå·²åœ¨(:room)æ‰¾åˆ°(bossName)ã€‚

// å«æ€
($numKill) = 0
[while] (numKill) < 2 && (BossTanlong) != åŸåœ°ç­‰å¾…é€šçŸ¥ç©å®¶ && (result) == get
  // æ¢è£…å¤‡æŠ€èƒ½è§¦å‘
  [if] (BossSkill) != null
    (BossSkill)
    @await 5000
  @print æŠ€èƒ½å†·å´ä¸­ï¼Œç¨ç­‰ç‰‡åˆ»åä¼šä¸»åŠ¨å‡»æ€â€¦â€¦
  @cd
  [if] (bossPlace) == è¡€åˆ€é—¨ && {rè¡€åˆ€è€ç¥–}? != null
    ($result) = xuedao
    ($logResult) = ã€Bosså¯»è¸ªã€‘(:name)ï¼šé‡åˆ°è¡€åˆ€è€ç¥–ï¼Œè¯·æ‰‹åŠ¨å¤„ç†ã€‚
    [break]
  [if] (BossTanlong) != è‡ªå®šä¹‰å‘½ä»¤
    [if] (BossTanlong) == å‰‘å¿ƒ+èåˆæ¢é¾™
      @perform force.xin,unarmed.ref
    [else if] (BossTanlong) == å‰‘å¿ƒ+æ­£å¸¸æ¢é¾™
      @perform force.xin,unarmed.luo
    [else if] (BossTanlong) == èåˆæ¢é¾™
      @perform unarmed.ref
    [else if] (BossTanlong) == æ­£å¸¸æ¢é¾™
      @perform unarmed.luo
  [else]
    (BossCustomKill)
  $killall
  @await 1000
  @until (:combating) == false || (:living) == false
  [if] (:living) == false
    [while] (:living) == false
      [{bå¤©å¸ˆç¬¦y}?==null]shop 1 1
      relive locale
      @await 1000
    @until (:living) == true
    ($numKill) = (numKill) + 1
  [else]
    [if] (bossName) == å¤©åƒ§
      @until {r<hik>å¤©åƒ§</hik>çš„å°¸ä½“} != null
    get all from {r(bossName)}?
    get all from {r(bossName)}?
    @tip ä½ èº«ä¸Š($bagfull)å¤ªå¤šäº†|ä½ æ‹¿ä¸ä¸‹($bagfull)ä¸œè¥¿|ä½ è¦ä»å“ªæ‹¿èµ°ä»€ä¹ˆä¸œè¥¿|æ‹¿èµ°ä»»ä½•ä¸œè¥¿|ä¸œè¥¿å°±åœ¨ä½ èº«ä¸Š|é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰|é‡Œé¢æ²¡æœ‰ä¸œè¥¿|å°¸ä½“é‡Œæ‹¿å‡ºæ¥
    [if] (bagfull) != null
      ($bagfull) = null
      ($weqAry) = 'åŠ¨ç‰©çš®æ¯›','å¸ƒè¡£','é“å‰‘','é’¢åˆ€','æœ¨æ£','è‹±é›„å·¾','å¸ƒé‹','åŸºæœ¬'
      @js ($weqLen) = [(weqAry)].length
      ($weqNum) = 0
      [while] (weqNum) < (weqLen)
        @js ($weq) = [(weqAry)][(weqNum)]
        [while] {b(weq)w}? != null
          drop {b(weq)w}?
        ($weqNum) = (weqNum) + 1
      @await 1000
      get all from {r(bossName)}?
      get all from {r(bossName)}?
      @tip ä½ èº«ä¸Š($bagfull)å¤ªå¤šäº†|ä½ æ‹¿ä¸ä¸‹($bagfull)ä¸œè¥¿|ä½ è¦ä»å“ªæ‹¿èµ°ä»€ä¹ˆä¸œè¥¿|æ‹¿èµ°ä»»ä½•ä¸œè¥¿|ä¸œè¥¿å°±åœ¨ä½ èº«ä¸Š|é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰|é‡Œé¢æ²¡æœ‰ä¸œè¥¿|å°¸ä½“é‡Œæ‹¿å‡ºæ¥
    [if] (bagfull) != null
      ($result) = full
      ($logResult) = ã€Bossæ‹¾å–ã€‘(:name)ï¼ŒèƒŒåŒ…å·²æ»¡æ— æ³•æ‹¾å–ï¼Œè¯·å°½å¿«å¤„ç†ã€‚
      [break]
    @await 3000
    cr;cr over
    ($xluAry) = 'é¦™ç‚‰g','æª€é¦™ç‚‰b','æ²‰é¦™æœ¨é¼y','éºé¦™é“œé¼p','é¾™æ¶é¦™ç†o','é¾™è„‘å¤é¼r'
    @js ($lenXlu) = [(xluAry)].length
    ($numXlu) = 0
    [while] (numXlu) < (lenXlu)
      @js ($xlu) = [(xluAry)][(numXlu)]
      ($xlu_1) = {b(xlu)}?
      ($xlu_2) = {b(xlu)}?# obj.id == "(xlu_1)" #
      [if] "(xlu_2)" != "(xlu_1)" && "(xlu_1)" != "null" && "(xlu_2)" != "null"
        packitem hc {b(xlu)}?
      ($numXlu) = (numXlu) + 1
    @await 2000
    @renew
    @tidyBag
    @await 2000
    [if] (BossBefore) != null
      (BossBefore)
      @await 4000
    $zdwk
    [exit]
[if] (numKill) >= 2
  ($result) = fail
  ($logResult) = ã€Bossè­¦æŠ¥ã€‘(:name)ï¼Œæ— æ³•æ­£å¸¸å‡»æ€(bossName)ã€‚
[if] (logResult) != null
  [if] (BossWarning) == æç¤ºéŸ³
    @beep
  [else if] (BossWarning) == è¯­éŸ³æ’­æŠ¥
    $tts (logResult)
  [else if] (BossWarning) == è¿œç¨‹é€šçŸ¥
    @push (logResult)
  [else if] (BossWarning) == å¼¹çª—æç¤º
    @js alert("(logResult)")
  @print <hiy>(logResult)</hiy>